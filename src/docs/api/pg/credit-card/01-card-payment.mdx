---
title: 신용카드 결제 (Non-UI)
description: 신용카드 결제 및 빌키 결제 API
category: 결제 API
path: /spay/APICardActionPay.do
method: POST
testUrl: https://tbgw.settlebank.co.kr/spay/APICardActionPay.do
prodUrl: https://gw.settlebank.co.kr/spay/APICardActionPay.do
---

# 신용카드 결제 (Non-UI)

신용카드 결제 및 빌키 결제 API입니다.

**결제 방식:**
- 구인증: 카드번호, 유효기간(yyMM), 식별번호, 카드비밀번호로 결제 요청
- 비인증: 카드번호, 유효기간(yyMM)으로 결제 요청
- 빌키(자동결제 키) 발급: 상점 아이디 설정에 따라 빌키를 응답 값으로 내려 드리고 있으며, 빌키를 따로 저장 하였다가 결제가 필요할 경우 빌키 결제로 요청 주시길 바랍니다.

**해시 생성 방법:**
- **요청 해시**: pktHash = SHA256(거래일자 + 거래시간 + 상점아이디 + 상점주문번호 + 거래금액(평문) + 해쉬키)
- **응답 해시**: pktHash = SHA256(거래상태코드 + 요청일자 + 요청시간 + 상점아이디 + 상점주문번호 + 거래금액 + 해쉬키)

## 📡 API 정보

| 항목 | 값 |
|------|-----|
| **HTTP Method** | `POST` |
| **경로** | `/spay/APICardActionPay.do` |
| **테스트 URL** | `https://tbgw.settlebank.co.kr/spay/APICardActionPay.do` |
| **운영 URL** | `https://gw.settlebank.co.kr/spay/APICardActionPay.do` |

## 📋 요청 파라미터

### params 객체

<ParameterCard
  name="mchtId"
  type="string(10)"
  required={true}
  description="헥토파이낸셜에서 부여하는 고유 상점아이디입니다."
  example="nxca_jt_bi"
  values={[
    "nxca_ks_gu: 구인증 신용카드",
    "nxca_jt_bi: 비인증 신용카드"
  ]}
  inputType="text"
  defaultValue="nxca_jt_bi"
  placeholder="상점아이디를 입력하세요"
  section="params"
/>

<ParameterCard
  name="ver"
  type="string(4)"
  required={true}
  description="전문의 버전입니다."
  example="0A19"
  note="고정값으로 사용합니다."
  inputType="text"
  defaultValue="0A19"
  fixed={true}
  section="params"
/>

<ParameterCard
  name="method"
  type="string(2)"
  required={true}
  description="결제수단 코드입니다."
  example="CA"
  note="신용카드 결제의 경우 'CA' 고정값을 사용합니다."
  inputType="text"
  defaultValue="CA"
  fixed={true}
  section="params"
/>

<ParameterCard
  name="bizType"
  type="string(2)"
  required={true}
  description="업무구분 코드입니다."
  example="B0"
  note="일반 결제의 경우 'B0' 고정값을 사용합니다."
  inputType="text"
  defaultValue="B0"
  fixed={true}
  section="params"
/>

<ParameterCard
  name="encCd"
  type="string(2)"
  required={true}
  description="암호화 구분 코드입니다."
  example="23"
  note="AES 암호화 사용 시 '23' 고정값을 사용합니다."
  inputType="text"
  defaultValue="23"
  fixed={true}
  section="params"
/>

<ParameterCard
  name="mchtTrdNo"
  type="string(100)"
  required={true}
  description="상점에서 생성하는 고유한 거래번호입니다."
  example="ORDER20231215143022"
  note="⚠️ 한글은 사용할 수 없으며, 영문, 숫자, 일부 특수문자만 사용 가능합니다."
  inputType="text"
  defaultValue="ORDER20231215143022"
  placeholder="상점주문번호를 입력하세요"
  section="params"
/>

<ParameterCard
  name="trdDt"
  type="string(8)"
  required={true}
  description="거래 요청 일자입니다. yyyyMMdd 형식으로 전달합니다."
  example="20231215"
  inputType="text"
  defaultValue="20231215"
  placeholder="거래일자를 입력하세요"
  section="params"
/>

<ParameterCard
  name="trdTm"
  type="string(6)"
  required={true}
  description="거래 요청 시간입니다. HH24MISS 형식으로 전달합니다."
  example="143022"
  inputType="text"
  defaultValue="143022"
  placeholder="거래시간을 입력하세요"
  section="params"
/>

<ParameterCard
  name="mobileYn"
  type="string(1)"
  required={false}
  description="모바일 여부입니다."
  example="N"
  inputType="text"
  defaultValue="N"
  placeholder="모바일 여부를 입력하세요"
  values={[
    "Y: 모바일웹/앱",
    "N: PC 또는 그 외"
  ]}
  section="params"
/>

<ParameterCard
  name="osType"
  type="string(1)"
  required={false}
  description="OS 구분입니다."
  example="W"
  inputType="text"
  defaultValue="W"
  placeholder="OS 타입을 입력하세요"
  values={[
    "A: Android",
    "I: iOS", 
    "W: Windows",
    "M: Mac",
    "E: 기타",
    "공백: 확인불가"
  ]}
  section="params"
/>

### data 객체

<ParameterCard
  name="pktHash"
  type="string(64)"
  required={true}
  description="SHA256 방식으로 생성한 해쉬값입니다."
  example="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  inputType="text"
  defaultValue="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  placeholder="SHA256 해쉬값을 입력하세요"
  fixed={true}
  note="🔒 거래일자 + 거래시간 + 상점아이디 + 상점주문번호 + 거래금액(평문) + 해쉬키 순서로 조합"
  section="data"
/>

<ParameterCard
  name="pmtprdNm"
  type="string(128)"
  required={true}
  description="결제상품명입니다."
  example="테스트상품"
  inputType="text"
  defaultValue="테스트상품"
  placeholder="결제상품명을 입력하세요"
  section="data"
/>

<ParameterCard
  name="mchtCustNm"
  type="string(50)"
  required={true}
  description="상점 고객명입니다."
  example="홍길동"
  inputType="text"
  defaultValue="홍길동"
  placeholder="상점 고객명을 입력하세요"
  section="data"
/>

<ParameterCard
  name="mchtCustId"
  type="string(50)"
  required={true}
  description="상점 고객아이디입니다."
  example="HongGilDong"
  inputType="text"
  defaultValue="HongGilDong"
  placeholder="고객 아이디를 입력하세요"
  section="data"
/>

<ParameterCard
  name="email"
  type="string(100)"
  required={false}
  description="상점 고객 이메일주소입니다."
  example="HongGilDong@example.com"
  inputType="email"
  defaultValue="HongGilDong@example.com"
  placeholder="이메일 주소를 입력하세요"
  section="data"
/>

<ParameterCard
  name="cardNo"
  type="string(16)"
  required={true}
  description="카드번호입니다. AES 암호화하여 전달합니다."
  example="1111222233334444"
  note="🔒 AES 암호화 필수"
  inputType="text"
  defaultValue="1111222233334444"
  placeholder="카드번호를 입력하세요"
  section="data"
/>

<ParameterCard
  name="vldDtMon"
  type="string(2)"
  required={true}
  description="유효기간(월)입니다. AES 암호화하여 전달합니다."
  example="12"
  note="🔒 AES 암호화 필수"
  inputType="text"
  defaultValue="12"
  placeholder="월을 입력하세요 (01-12)"
  section="data"
/>

<ParameterCard
  name="vldDtYear"
  type="string(2)"
  required={true}
  description="유효기간(년)입니다. AES 암호화하여 전달합니다."
  example="24"
  note="🔒 AES 암호화 필수"
  inputType="text"
  defaultValue="24"
  placeholder="년도를 입력하세요 (YY)"
  section="data"
/>

<ParameterCard
  name="idntNo"
  type="string(10)"
  required={false}
  description="식별번호입니다. 생년월일 6자리 또는 사업자 번호 10자리, AES 암호화하여 전달합니다. 구인증만 사용합니다."
  example="991231"
  note="🔒 AES 암호화 필수, 구인증에서만 사용"
  inputType="text"
  defaultValue="991231"
  placeholder="주민등록번호 앞 6자리를 입력하세요"
  section="data"
/>

<ParameterCard
  name="cardPwd"
  type="string(2)"
  required={false}
  description="카드비밀번호 앞 2자리입니다. AES 암호화하여 전달합니다. 구인증만 사용합니다."
  example="00"
  note="🔒 AES 암호화 필수, 구인증에서만 사용"
  inputType="password"
  defaultValue="00"
  placeholder="카드 비밀번호 앞 2자리를 입력하세요"
  section="data"
/>

<ParameterCard
  name="instmtMon"
  type="string(2)"
  required={true}
  description="할부개월수입니다."
  example="00"
  inputType="text"
  defaultValue="00"
  placeholder="할부개월수를 입력하세요"
  values={[
    "00: 일시불",
    "02~12: 2개월~12개월 할부"
  ]}
  section="data"
/>

<ParameterCard
  name="crcCd"
  type="string(3)"
  required={true}
  description="통화구분입니다."
  example="KRW"
  inputType="text"
  defaultValue="KRW"
  fixed={true}
  values={[
    "KRW: 국내결제",
    "USD: 해외결제"
  ]}
  section="data"
/>

<ParameterCard
  name="taxTypeCd"
  type="string(1)"
  required={false}
  description="세금유형입니다."
  example="N"
  inputType="text"
  defaultValue="N"
  placeholder="과세구분코드를 입력하세요"
  values={[
    "N: 과세",
    "Y: 면세", 
    "G: 복합과세",
    "공백: 상점 설정에 따름"
  ]}
  section="data"
/>

<ParameterCard
  name="trdAmt"
  type="string(12)"
  required={true}
  description="거래금액입니다. AES 암호화하여 전달합니다."
  example="1000"
  note="🔒 AES 암호화 필수, 해외결제시 정수표기"
  inputType="number"
  defaultValue="1000"
  placeholder="거래금액을 입력하세요"
  section="data"
/>

<ParameterCard
  name="taxAmt"
  type="string(12)"
  required={false}
  description="거래금액 중 과세금액입니다. 복합과세일 경우 필수, AES 암호화하여 전달합니다."
  example="909"
  note="🔒 AES 암호화 필수, 복합과세일 경우 필수"
  inputType="number"
  defaultValue="909"
  placeholder="부가세 금액을 입력하세요"
  section="data"
/>

<ParameterCard
  name="vatAmt"
  type="string(12)"
  required={false}
  description="거래금액 중 부가세금액입니다. 복합과세일 경우 필수, AES 암호화하여 전달합니다."
  example="91"
  note="🔒 AES 암호화 필수, 복합과세일 경우 필수"
  inputType="number"
  defaultValue="91"
  placeholder="VAT 금액을 입력하세요"
  section="data"
/>

<ParameterCard
  name="taxFreeAmt"
  type="string(12)"
  required={false}
  description="거래금액 중 비과세금액입니다. 복합과세일 경우 필수, AES 암호화하여 전달합니다."
  example="0"
  note="🔒 AES 암호화 필수, 복합과세일 경우 필수"
  inputType="number"
  defaultValue="0"
  placeholder="면세 금액을 입력하세요"
  section="data"
/>

<ParameterCard
  name="svcAmt"
  type="string(12)"
  required={false}
  description="신용카드 봉사료입니다. AES 암호화하여 전달합니다."
  example="10"
  note="🔒 AES 암호화 필수"
  inputType="number"
  defaultValue="10"
  placeholder="봉사료 금액을 입력하세요"
  section="data"
/>

<ParameterCard
  name="notiUrl"
  type="string(200)"
  required={false}
  description="결제완료후, 헥토파이낸셜에서 상점으로 전달하는 노티를 수신하는Callback URL입니다."
  example="https://example.com/notiUrl"
  inputType="url"
  defaultValue="https://example.com/notiUrl"
  placeholder="통보 URL을 입력하세요"
  section="data"
/>

<ParameterCard
  name="mchtParam"
  type="string(500)"
  required={false}
  description="기타 주문 정보를 입력하는 상점 예약 필드입니다."
  example="name=HongGilDong&age=25"
  inputType="text"
  defaultValue="name=HongGilDong&age=25"
  placeholder="임의 파라미터를 입력하세요"
  section="data"
/>

## 💻 요청 예시

### 비인증 신용카드 결제

```json
{
  "params": {
    "mchtId": "nxca_jt_bi",
    "ver": "0A19",
    "method": "CA",
    "bizType": "B0",
    "encCd": "23",
    "mchtTrdNo": "ORDER20231215143022",
    "trdDt": "20231215",
    "trdTm": "143022",
    "mobileYn": "N",
    "osType": "W"
  },
  "data": {
    "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c",
    "pmtprdNm": "테스트상품",
    "mchtCustNm": "홍길동",
    "mchtCustId": "HongGilDong",
    "email": "HongGilDong@example.com",
    "cardNo": "1111222233334444",
    "vldDtMon": "12",
    "vldDtYear": "24",
    "instmtMon": "00",
    "crcCd": "KRW",
    "taxTypeCd": "N",
    "trdAmt": "1000",
    "notiUrl": "https://example.com/notiUrl",
    "mchtParam": "name=HongGilDong&age=25"
  }
}
```

### 구인증 신용카드 결제

```json
{
  "params": {
    "mchtId": "nxca_ks_gu",
    "ver": "0A19",
    "method": "CA",
    "bizType": "B0",
    "encCd": "23",
    "mchtTrdNo": "ORDER20231215143022",
    "trdDt": "20231215",
    "trdTm": "143022",
    "mobileYn": "N",
    "osType": "W"
  },
  "data": {
    "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c",
    "pmtprdNm": "테스트상품",
    "mchtCustNm": "홍길동",
    "mchtCustId": "HongGilDong",
    "email": "HongGilDong@example.com",
    "cardNo": "1111222233334444",
    "vldDtMon": "12",
    "vldDtYear": "24",
    "idntNo": "991231",
    "cardPwd": "00",
    "instmtMon": "00",
    "crcCd": "KRW",
    "taxTypeCd": "N",
    "trdAmt": "1000",
    "notiUrl": "https://example.com/notiUrl",
    "mchtParam": "name=HongGilDong&age=25"
  }
}
```

## 📤 응답 예시

### 성공 응답

```json
{
  "params": {
    "mchtId": "nxca_jt_bi",
    "ver": "0A19",
    "method": "CA",
    "bizType": "B0",
    "encCd": "23",
    "mchtTrdNo": "ORDER20231215143022",
    "trdNo": "STFP_PGCAnxca_jt_il0211129135810M1494620",
    "trdDt": "20231215",
    "trdTm": "143022",
    "outStatCd": "0021",
    "outRsltCd": "0000",
    "outRsltMsg": "정상적으로 처리되었습니다."
  },
  "data": {
    "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c",
    "trdAmt": "1000",
    "billKey": "SBILL_0123456789",
    "cardNo": "111122xxxxxx4444",
    "vldDtMon": "12",
    "vldDtYear": "24",
    "issrId": "NHC",
    "cardNm": "NH 농협",
    "cardKind": "NH 체크카드",
    "ninstmtTypeCd": "N",
    "instmtMon": "00",
    "apprNo": "30001234"
  }
}
```

### 실패 응답

```json
{
  "params": {
    "mchtId": "nxca_jt_bi",
    "ver": "0A19",
    "method": "CA",
    "bizType": "B0",
    "encCd": "23",
    "mchtTrdNo": "ORDER20231215143022",
    "trdDt": "20231215",
    "trdTm": "143022",
    "outStatCd": "0031",
    "outRsltCd": "1001",
    "outRsltMsg": "카드번호가 올바르지 않습니다."
  },
  "data": {
    "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  }
}
```

## 🔧 구현 예시

### JavaScript

```javascript
// 신용카드 결제 API 호출
async function callCardPaymentAPI(params) {
  const response = await fetch('https://tbgw.settlebank.co.kr/spay/APICardActionPay.do', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(params)
  });
  
  return await response.json();
}

// 사용 예시
const paymentParams = {
  params: {
    mchtId: "nxca_jt_bi",
    ver: "0A19",
    method: "CA",
    bizType: "B0",
    encCd: "23",
    mchtTrdNo: "ORDER" + Date.now(),
    trdDt: new Date().toISOString().slice(0, 10).replace(/-/g, ''),
    trdTm: new Date().toTimeString().slice(0, 8).replace(/:/g, ''),
    mobileYn: "N",
    osType: "W"
  },
  data: {
    pktHash: "생성된해시값",
    pmtprdNm: "테스트상품",
    mchtCustNm: "홍길동",
    mchtCustId: "HongGilDong",
    cardNo: "암호화된카드번호",
    vldDtMon: "12",
    vldDtYear: "24",
    instmtMon: "00",
    crcCd: "KRW",
    trdAmt: "1000"
  }
};

const result = await callCardPaymentAPI(paymentParams);
console.log('결제 결과:', result);
```

### Python

```python
import requests
import json
from datetime import datetime

# 신용카드 결제 API 호출
def call_card_payment_api(params):
    url = 'https://tbgw.settlebank.co.kr/spay/APICardActionPay.do'
    response = requests.post(url, json=params)
    return response.json()

# 사용 예시
current_time = datetime.now()
payment_params = {
    "params": {
        "mchtId": "nxca_jt_bi",
        "ver": "0A19",
        "method": "CA",
        "bizType": "B0",
        "encCd": "23",
        "mchtTrdNo": f"ORDER{int(current_time.timestamp())}",
        "trdDt": current_time.strftime("%Y%m%d"),
        "trdTm": current_time.strftime("%H%M%S"),
        "mobileYn": "N",
        "osType": "W"
    },
    "data": {
        "pktHash": "생성된해시값",
        "pmtprdNm": "테스트상품",
        "mchtCustNm": "홍길동",
        "mchtCustId": "HongGilDong",
        "cardNo": "암호화된카드번호",
        "vldDtMon": "12",
        "vldDtYear": "24",
        "instmtMon": "00",
        "crcCd": "KRW",
        "trdAmt": "1000"
    }
}

result = call_card_payment_api(payment_params)
print('결제 결과:', result)
```

## ⚠️ 주의사항

- 모든 요청은 HTTPS를 통해 전송되어야 합니다.
- 요청 본문은 JSON 형식으로 전송해야 합니다.
- 해시값 생성이 필요한 경우 정확한 순서로 생성해야 합니다.
- 카드번호, 유효기간, 식별번호, 카드비밀번호, 거래금액 등은 AES 암호화하여 전달해야 합니다.
- 빌키 서비스를 이용하는 상점의 경우 응답에서 빌키를 받을 수 있습니다.
- 구인증과 비인증은 서로 다른 상점아이디를 사용해야 합니다.


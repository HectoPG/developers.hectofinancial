export const apiInfo = {
  title: "신용카드 빌키 결제",
  description: "신용카드 빌키를 이용한 결제 API",
  category: "결제 API",
  path: "/spay/APIBillkeyPay.do",
  method: "POST",
  testUrl: "https://tbgw.settlebank.co.kr/spay/APIBillkeyPay.do",
  prodUrl: "https://gw.settlebank.co.kr/spay/APIBillkeyPay.do",
  contentType: "application/json"
};

# 신용카드 빌키 결제

신용카드 결제 API 또는 빌키 발급 API를 통해 전달받은 빌키로 결제를 하는 API입니다.

## 주의 사항

* 빌키 서비스는 영업 담당자를 통해 별도 신청이 필요합니다.
* 1회차 결제시 발급받은 빌키를 사용하여 2회차 이후 결제를 진행합니다.

## API 정보

- **Method**: `POST`
- **Path**: `/spay/APIBillkeyPay.do`
- **Content-Type**: `application/json`

## 요청 파라미터

<ApiObjectHeader name="params" type="object" description="API 요청의 기본 헤더 정보를 담는 객체입니다. 거래 식별 및 인증에 필요한 메타데이터를 포함합니다." />

<ApiParameterCard
  name="mchtId"
  type="string(12)"
  required={true}
  description="헥토파이낸셜에서 부여하는 고유 상점아이디입니다."
  example="nxca_jt_bi"
  values={[
    "nxca_ks_gu: 구인증",
    "nxca_jt_bi: 비인증"
  ]}
  inputType="text"
  defaultValue="nxca_jt_bi"
  placeholder="상점아이디를 입력하세요"
  section="params"
/>

<ApiParameterCard
  name="ver"
  type="string(4)"
  required={true}
  description="전문의 버전입니다."
  example="0A19"
  note="고정값으로 사용합니다."
  inputType="text"
  defaultValue="0A19"
  fixed={true}
  section="params"
/>

<ApiParameterCard
  name="method"
  type="string(2)"
  required={true}
  description="결제수단입니다."
  example="CA"
  note="고정값으로 사용합니다."
  inputType="text"
  defaultValue="CA"
  fixed={true}
  section="params"
/>

<ApiParameterCard
  name="bizType"
  type="string(2)"
  required={true}
  description="업무 구분코드입니다."
  example="B0"
  note="고정값으로 사용합니다."
  inputType="text"
  defaultValue="B0"
  fixed={true}
  section="params"
/>

<ApiParameterCard
  name="encCd"
  type="string(2)"
  required={true}
  description="암호화 구분 코드입니다."
  example="23"
  note="고정값으로 사용합니다."
  inputType="text"
  defaultValue="23"
  fixed={true}
  section="params"
/>

<ApiParameterCard
  name="mchtTrdNo"
  type="string(100)"
  required={true}
  description="상점에서 생성하는 고유한 주문번호입니다."
  example="ORDER20211231100000"
  inputType="text"
  defaultValue="ORDER20211231100000"
  placeholder="상점주문번호를 입력하세요"
  section="params"
/>

<ApiParameterCard
  name="trdDt"
  type="string(8)"
  required={true}
  description="현재 전문을 전송하는 일자(YYYYMMDD)입니다."
  example="20211231"
  inputType="text"
  defaultValue="20211231"
  placeholder="YYYYMMDD 형식으로 입력하세요"
  section="params"
/>

<ApiParameterCard
  name="trdTm"
  type="string(6)"
  required={true}
  description="현재 전문을 전송하는 시간(HHMMSS)입니다."
  example="100000"
  inputType="text"
  defaultValue="100000"
  placeholder="HHMMSS 형식으로 입력하세요"
  section="params"
/>

<ApiParameterCard
  name="mobileYn"
  type="string(1)"
  required={false}
  description="모바일 여부입니다."
  example="N"
  values={[
    "Y: 모바일웹/앱",
    "N: PC 또는 그 외"
  ]}
  inputType="text"
  defaultValue="N"
  placeholder="모바일 여부를 입력하세요"
  section="params"
/>

<ApiParameterCard
  name="osType"
  type="string(1)"
  required={false}
  description="OS 구분입니다."
  example="W"
  values={[
    "A: Android",
    "I: IOS", 
    "W: windows",
    "M: Mac",
    "E: 기타"
  ]}
  inputType="text"
  defaultValue="W"
  placeholder="OS 구분을 입력하세요"
  section="params"
/>

<ApiObjectHeader name="data" type="object" description="빌키 결제 처리에 필요한 비즈니스 데이터를 담는 객체입니다. 빌키 정보, 결제금액, 고객 정보 등 결제 요청의 핵심 정보를 포함합니다." />

<ApiParameterCard
  name="pktHash"
  type="string(200)"
  required={true}
  description="SHA256 방식으로 생성한 해쉬값입니다."
  example="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  inputType="text"
  defaultValue="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  placeholder="SHA256 해쉬값을 입력하세요"
  fixed={true}
  note="🔒 거래일자 + 거래시간 + 상점아이디 + 상점주문번호 + 거래금액(평문) + 해쉬키 순서로 조합"
  section="data"
/>

<ApiParameterCard
  name="pmtprdNm"
  type="string(128)"
  required={true}
  description="결제상품명입니다."
  example="테스트상품"
  inputType="text"
  defaultValue="테스트상품"
  placeholder="상품명을 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="mchtCustNm"
  type="string(30)"
  required={true}
  description="상점 고객명입니다."
  example="홍길동"
  inputType="text"
  defaultValue="홍길동"
  placeholder="고객명을 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="mchtCustId"
  type="string(50)"
  required={true}
  description="상점 고객아이디입니다."
  example="HongGilDong"
  inputType="text"
  defaultValue="HongGilDong"
  placeholder="고객아이디를 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="email"
  type="string(60)"
  required={false}
  description="상점 고객 이메일주소입니다."
  example="HongGilDong@example.com"
  inputType="email"
  defaultValue="HongGilDong@example.com"
  placeholder="이메일 주소를 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="billKey"
  type="string(50)"
  required={true}
  description="1회차 결제시 발급받았던 빌키입니다."
  example="SBILL_0123456789"
  inputType="text"
  defaultValue="SBILL_0123456789"
  placeholder="빌키를 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="instmtMon"
  type="string(2)"
  required={true}
  description="할부개월수 2자리입니다."
  example="00"
  inputType="text"
  defaultValue="00"
  placeholder="할부개월수를 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="crcCd"
  type="string(3)"
  required={true}
  description="통화구분입니다."
  example="KRW"
  values={[
    "KRW: 국내결제",
    "USD: 해외결제"
  ]}
  inputType="text"
  defaultValue="KRW"
  placeholder="통화구분을 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="taxTypeCd"
  type="string(1)"
  required={false}
  description="세금유형입니다."
  example="N"
  values={[
    "N: 과세",
    "Y: 면세",
    "G: 복합과세"
  ]}
  inputType="text"
  defaultValue="N"
  placeholder="세금유형을 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="trdAmt"
  type="string(12)"
  required={true}
  description="거래금액입니다."
  example="1000"
  note="국내결제: 1000, 해외결제: 150 (ex [1.50$] => 정수표기 [150])"
  inputType="text"
  defaultValue="1000"
  placeholder="거래금액을 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="taxAmt"
  type="string(12)"
  required={false}
  description="거래금액 중 과세금액입니다. 복합과세일 경우 필수입니다."
  example="909"
  inputType="text"
  defaultValue="909"
  placeholder="과세금액을 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="vatAmt"
  type="string(12)"
  required={false}
  description="거래금액 중 부가세금액입니다. 복합과세일 경우 필수입니다."
  example="91"
  inputType="text"
  defaultValue="91"
  placeholder="부가세금액을 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="taxFreeAmt"
  type="string(12)"
  required={false}
  description="거래금액 중 비과세금액입니다. 복합과세일 경우 필수입니다."
  example="0"
  inputType="text"
  defaultValue="0"
  placeholder="비과세금액을 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="svcAmt"
  type="string(12)"
  required={false}
  description="신용카드 봉사료입니다."
  example="10"
  inputType="text"
  defaultValue="10"
  placeholder="봉사료를 입력하세요"
  section="data"
/>

<ApiParameterCard
  name="mchtParam"
  type="string(4000)"
  required={false}
  description="기타 주문 정보를 입력하는 상점 예약 필드입니다."
  example="name=HongGilDong&age=25"
  inputType="text"
  defaultValue="name=HongGilDong&age=25"
  placeholder="상점예약필드를 입력하세요"
  section="data"
/>

## 해쉬 생성 방법

해쉬값은 다음 순서로 조합하여 SHA256으로 생성합니다:

```
거래일자 + 거래시간 + 상점아이디 + 상점주문번호 + 거래금액(평문) + 해쉬키
```

## 응답 파라미터

### 성공 응답

<ApiObjectHeader name="params" type="object" description="API 요청의 기본 헤더 정보를 담는 객체입니다. 거래 식별 및 인증에 필요한 메타데이터를 포함합니다." /> 객체

<DocParameterCard
  name="mchtId"
  type="string"
  required={true}
  description="헥토파이낸셜에서 부여하는 고유 상점아이디"
  example="nxca_jt_bi"
/>

<DocParameterCard
  name="ver"
  type="string"
  required={true}
  description="전문의 버전"
  example="0A19"
  note="고정값"
/>

<DocParameterCard
  name="method"
  type="string"
  required={true}
  description="결제수단"
  example="CA"
  note="고정값"
/>

<DocParameterCard
  name="bizType"
  type="string"
  required={true}
  description="업무구분코드"
  example="B0"
  note="고정값"
/>

<DocParameterCard
  name="encCd"
  type="string"
  required={true}
  description="암호화구분코드"
  example="23"
  note="고정값"
/>

<DocParameterCard
  name="mchtTrdNo"
  type="string"
  required={true}
  description="상점에서 생성하는 고유 주문번호"
  example="ORDER20211231100000"
/>

<DocParameterCard
  name="trdNo"
  type="string"
  required={true}
  description="헥토파이낸셜에서 부여하는 고유 거래번호"
  example="STFP_PGCAnxca_jt_il0211129135810M1494620"
/>

<DocParameterCard
  name="trdDt"
  type="string"
  required={true}
  description="요청일자 (YYYYMMDD)"
  example="20211231"
/>

<DocParameterCard
  name="trdTm"
  type="string"
  required={true}
  description="요청시간 (HHMMSS)"
  example="100000"
/>

<DocParameterCard
  name="outStatCd"
  type="string"
  required={true}
  description="거래상태코드"
  example="0021"
  values={[
    "0021: 성공",
    "0031: 실패"
  ]}
/>

<DocParameterCard
  name="outRsltCd"
  type="string"
  required={true}
  description="결과코드"
  example="0000"
  values={[
    "0000: 성공",
    "기타: 실패코드"
  ]}
/>

<DocParameterCard
  name="outRsltMsg"
  type="string"
  required={true}
  description="결과메시지"
  example="정상적으로 처리되었습니다."
/>

<DocParameterCard
  name="pktHash"
  type="string"
  required={true}
  description="해쉬값 (요청시 전송한 값 그대로 반환)"
  example="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
/>

<DocParameterCard
  name="trdAmt"
  type="string"
  required={true}
  description="거래금액"
  example="1000"
/>

<DocParameterCard
  name="billKey"
  type="string"
  required={true}
  description="빌키 (자동결제키)"
  example="SBILL_0123456789"
/>

<DocParameterCard
  name="cardNo"
  type="string"
  required={true}
  description="카드번호 (마스킹 처리됨)"
  example="111122xxxxxx4444"
/>

<DocParameterCard
  name="vldDtMon"
  type="string"
  required={true}
  description="유효기간(월)"
  example="12"
/>

<DocParameterCard
  name="vldDtYear"
  type="string"
  required={true}
  description="유효기간(년)"
  example="24"
/>

<DocParameterCard
  name="issrId"
  type="string"
  required={true}
  description="발급사아이디"
  example="NHC"
/>

<DocParameterCard
  name="cardNm"
  type="string"
  required={true}
  description="카드사명"
  example="NH 농협"
/>

<DocParameterCard
  name="cardKind"
  type="string"
  required={true}
  description="카드종류명"
  example="NH 체크카드"
/>

<DocParameterCard
  name="ninstmtTypeCd"
  type="string"
  required={true}
  description="무이자할부타입"
  example="N"
  values={[
    "N: 일반할부",
    "Y: 무이자할부"
  ]}
/>

<DocParameterCard
  name="instmtMon"
  type="string"
  required={true}
  description="할부개월수"
  example="00"
  values={[
    "00: 일시불",
    "02: 2개월",
    "03: 3개월",
    "기타: 해당 개월수"
  ]}
/>

<DocParameterCard
  name="apprNo"
  type="string"
  required={true}
  description="승인번호"
  example="30001234"
/>

<ApiObjectHeader name="data" type="object" description="빌키 결제 처리에 필요한 비즈니스 데이터를 담는 객체입니다. 빌키 정보, 결제금액, 고객 정보 등 결제 요청의 핵심 정보를 포함합니다." />

빌키 결제는 추가적인 data 객체가 없습니다.

### 실패 응답

<ApiObjectHeader name="params" type="object" description="API 요청의 기본 헤더 정보를 담는 객체입니다. 거래 식별 및 인증에 필요한 메타데이터를 포함합니다." /> 객체

<DocParameterCard
  name="outStatCd"
  type="string"
  required={true}
  description="거래상태코드"
  example="0031"
  values={[
    "0031: 실패"
  ]}
/>

<DocParameterCard
  name="outRsltCd"
  type="string"
  required={true}
  description="거절코드"
  example="1001"
  values={[
    "1001: 빌키 정보 오류",
    "기타: 각종 오류코드"
  ]}
/>

<DocParameterCard
  name="outRsltMsg"
  type="string"
  required={true}
  description="결과메시지"
  example="빌키 정보 오류"
/>

#<ApiObjectHeader name="data" type="object" description="빌키 결제 처리에 필요한 비즈니스 데이터를 담는 객체입니다. 빌키 정보, 결제금액, 고객 정보 등 결제 요청의 핵심 정보를 포함합니다." />

실패 시에는 data 객체가 비어있습니다.

## 응답 해쉬 검증

응답 해쉬값은 다음 순서로 조합하여 SHA256으로 생성됩니다:

```
거래상태코드 + 요청일자 + 요청시간 + 상점아이디 + 상점주문번호 + 거래금액 + 해쉬키
```

## 에러 코드

자세한 에러 코드는 [거절 코드 표](/docs/api/pg/credit-card/error-codes)를 참고하세요.

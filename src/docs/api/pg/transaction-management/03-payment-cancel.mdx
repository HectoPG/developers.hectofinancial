---
title: 결제 취소
description: 신용카드, 계좌이체, 휴대폰결제 등 결제 취소 API
category: 결제 관리 API
path: /spay/APICancel.do
method: POST
testUrl: https://tbgw.settlebank.co.kr/spay/APICancel.do
prodUrl: https://gw.settlebank.co.kr/spay/APICancel.do
---

# 결제 취소

신용카드, 계좌이체, 휴대폰결제 등 모든 결제 수단의 취소를 처리하는 API입니다.

## API 정보

- **Method**: `POST`
- **Path**: `/spay/APICancel.do`
- **Content-Type**: `application/json`

## 요청 파라미터

<ApiObjectHeader name="params" type="object" description="API 요청의 기본 헤더 정보를 담는 객체입니다. 거래 식별 및 인증에 필요한 메타데이터를 포함합니다." />

<ApiParameterCard
  name="mchtId"
  type="string(10)"
  required={true}
  description="헥토파이낸셜에서 부여하는 고유 상점아이디입니다."
  example="nxca_jt_bi"
/>

<ApiParameterCard
  name="orgTrdNo"
  type="string(50)"
  required={true}
  description="원거래번호입니다. 취소하려는 원래 거래의 헥토파이낸셜 거래번호입니다."
  example="STFP_PGCAnxca_jt_il0211129135810M1494620"
/>

<ApiParameterCard
  name="orgMchtTrdNo"
  type="string(100)"
  required={true}
  description="원주문번호입니다. 취소하려는 원래 거래의 상점주문번호입니다."
  example="ORDER20231215143022"
/>

<ApiParameterCard
  name="orgTrdDt"
  type="string(8)"
  required={true}
  description="원거래일자입니다. 취소하려는 원래 거래의 거래일자입니다."
  example="20231215"
/>

<ApiParameterCard
  name="canAmt"
  type="string(12)"
  required={true}
  description="취소금액입니다. 원거래금액보다 작거나 같아야 합니다."
  example="1000"
  note="💰 부분취소 가능, 원거래금액 이하로만 설정 가능"
/>

<ApiParameterCard
  name="pktHash"
  type="string(64)"
  required={true}
  description="SHA256 방식으로 생성한 해쉬값입니다."
  example="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  note="🔒 원거래번호 + 원주문번호 + 원거래일자 + 취소금액 + 해쉬키 순서로 조합"
/>

## 💻 요청 예시

### 전체 취소

```json
{
  "mchtId": "nxca_jt_bi",
  "orgTrdNo": "STFP_PGCAnxca_jt_il0211129135810M1494620",
  "orgMchtTrdNo": "ORDER20231215143022",
  "orgTrdDt": "20231215",
  "canAmt": "1000",
  "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
}
```

### 부분 취소

```json
{
  "mchtId": "nxca_jt_bi",
  "orgTrdNo": "STFP_PGCAnxca_jt_il0211129135810M1494620",
  "orgMchtTrdNo": "ORDER20231215143022",
  "orgTrdDt": "20231215",
  "canAmt": "500",
  "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
}
```

## 📤 응답 파라미터

### 성공 응답

<DocParameterCard
  name="resultCode"
  type="string"
  required={true}
  description="결과코드"
  example="0000"
  values={[
    "0000: 성공",
    "기타: 실패코드"
  ]}
/>

<DocParameterCard
  name="resultMsg"
  type="string"
  required={true}
  description="결과메시지"
  example="정상적으로 처리되었습니다."
/>

<DocParameterCard
  name="canTrdNo"
  type="string"
  required={true}
  description="취소 거래번호"
  example="STFP_CANCEL_nxca_jt_il0211129135810M1494621"
/>

### 실패 응답

<DocParameterCard
  name="resultCode"
  type="string"
  required={true}
  description="결과코드"
  example="1002"
  values={[
    "1002: 취소금액이 원거래금액을 초과",
    "기타: 각종 오류코드"
  ]}
/>

<DocParameterCard
  name="resultMsg"
  type="string"
  required={true}
  description="결과메시지"
  example="취소금액이 원거래금액을 초과합니다."
/>

<DocParameterCard
  name="canTrdNo"
  type="string"
  required={false}
  description="취소 거래번호 (실패시 null)"
  example="null"
/>

## 🔧 구현 예시

### JavaScript

```javascript
// 결제 취소 API 호출
async function callPaymentCancelAPI(params) {
  const response = await fetch('https://tbgw.settlebank.co.kr/spay/APICancel.do', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(params)
  });
  
  return await response.json();
}

// 사용 예시 - 전체 취소
const cancelParams = {
  mchtId: "nxca_jt_bi",
  orgTrdNo: "STFP_PGCAnxca_jt_il0211129135810M1494620",
  orgMchtTrdNo: "ORDER20231215143022",
  orgTrdDt: "20231215",
  canAmt: "1000", // 전체 금액 취소
  pktHash: "생성된해시값"
};

const result = await callPaymentCancelAPI(cancelParams);
if (result.resultCode === "0000") {
  console.log('취소 성공:', result.canTrdNo);
} else {
  console.error('취소 실패:', result.resultMsg);
}

// 부분 취소 예시
const partialCancelParams = {
  ...cancelParams,
  canAmt: "500" // 부분 취소 금액
};

const partialResult = await callPaymentCancelAPI(partialCancelParams);
```

### Python

```python
import requests
import json

# 결제 취소 API 호출
def call_payment_cancel_api(params):
    url = 'https://tbgw.settlebank.co.kr/spay/APICancel.do'
    response = requests.post(url, json=params)
    return response.json()

# 사용 예시 - 전체 취소
cancel_params = {
    "mchtId": "nxca_jt_bi",
    "orgTrdNo": "STFP_PGCAnxca_jt_il0211129135810M1494620",
    "orgMchtTrdNo": "ORDER20231215143022",
    "orgTrdDt": "20231215",
    "canAmt": "1000",  # 전체 금액 취소
    "pktHash": "생성된해시값"
}

result = call_payment_cancel_api(cancel_params)
if result["resultCode"] == "0000":
    print('취소 성공:', result["canTrdNo"])
else:
    print('취소 실패:', result["resultMsg"])

# 부분 취소 예시
partial_cancel_params = {
    **cancel_params,
    "canAmt": "500"  # 부분 취소 금액
}

partial_result = call_payment_cancel_api(partial_cancel_params)
```

## ⚠️ 주의사항

- 취소는 원거래 발생일로부터 제한된 기간 내에만 가능합니다.
- 부분취소가 가능한 결제수단과 불가능한 결제수단이 있습니다.
- 취소금액은 원거래금액을 초과할 수 없습니다.
- 이미 취소된 거래에 대한 중복 취소는 불가능합니다.
- 취소 처리 시간은 결제수단과 카드사에 따라 다를 수 있습니다.
- 취소 승인 후 실제 카드사 취소 처리는 시간이 더 소요될 수 있습니다.


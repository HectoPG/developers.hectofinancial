---
title: 가상계좌 채번
description: 가상계좌 발급 및 채번취소 API
category: 결제 API
path: /spay/APIVBank.do
method: POST
testUrl: https://tbgw.settlebank.co.kr/spay/APIVBank.do
prodUrl: https://gw.settlebank.co.kr/spay/APIVBank.do
---

# 가상계좌 채번

가상계좌 발급 및 채번취소 API입니다. 고객에게 고유한 가상계좌번호를 발급하여 입금을 받을 수 있습니다.

## 📡 API 정보

| 항목 | 값 |
|------|-----|
| **HTTP Method** | `POST` |
| **경로** | `/spay/APIVBank.do` |
| **테스트 URL** | `https://tbgw.settlebank.co.kr/spay/APIVBank.do` |
| **운영 URL** | `https://gw.settlebank.co.kr/spay/APIVBank.do` |

## 📋 요청 파라미터

<ApiParameterCard
  name="mchtId"
  type="string(10)"
  required={true}
  description="헥토파이낸셜에서 부여하는 고유 상점아이디입니다."
  example="nxca_jt_bi"
/>

<ApiParameterCard
  name="mchtTrdNo"
  type="string(100)"
  required={true}
  description="상점에서 생성하는 고유 주문번호입니다."
  example="VBANK20231215143022"
  note="⚠️ 한글은 사용할 수 없으며, 영문, 숫자, 일부 특수문자만 사용 가능합니다."
/>

<ApiParameterCard
  name="trdDt"
  type="string(8)"
  required={true}
  description="거래 요청 일자입니다. yyyyMMdd 형식으로 전달합니다."
  example="20231215"
/>

<ApiParameterCard
  name="trdTm"
  type="string(6)"
  required={true}
  description="거래 요청 시간입니다. HH24MISS 형식으로 전달합니다."
  example="143022"
/>

<ApiParameterCard
  name="trdAmt"
  type="string(12)"
  required={true}
  description="가상계좌 입금 예정 금액입니다."
  example="10000"
  note="💰 입금 예정 금액을 설정하며, 이 금액으로 입금 시 자동 승인됩니다."
/>

<ApiParameterCard
  name="pktHash"
  type="string(64)"
  required={true}
  description="SHA256 방식으로 생성한 해쉬값입니다."
  example="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  note="🔒 거래일자 + 거래시간 + 상점아이디 + 상점주문번호 + 거래금액 + 해쉬키 순서로 조합"
/>

<ApiParameterCard
  name="expDt"
  type="string(8)"
  required={false}
  description="가상계좌 만료일자입니다. yyyyMMdd 형식으로 전달합니다."
  example="20231222"
  note="⏰ 설정하지 않으면 기본 만료일(7일 후)이 적용됩니다."
/>

<ApiParameterCard
  name="bankCd"
  type="string(3)"
  required={false}
  description="선호 은행코드입니다."
  example="004"
  values={[
    "004: 국민은행",
    "020: 농협",
    "088: 신한은행",
    "081: 하나은행",
    "003: 기업은행"
  ]}
  note="💡 설정하지 않으면 시스템에서 자동 할당합니다."
/>

## 💻 요청 예시

### 기본 가상계좌 발급

```json
{
  "mchtId": "nxca_jt_bi",
  "mchtTrdNo": "VBANK20231215143022",
  "trdDt": "20231215",
  "trdTm": "143022",
  "trdAmt": "10000",
  "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
}
```

### 만료일과 은행 지정

```json
{
  "mchtId": "nxca_jt_bi",
  "mchtTrdNo": "VBANK20231215143022",
  "trdDt": "20231215",
  "trdTm": "143022",
  "trdAmt": "10000",
  "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c",
  "expDt": "20231222",
  "bankCd": "004"
}
```

## 📤 응답 파라미터

### 성공 응답

<DocParameterCard
  name="resultCode"
  type="string"
  required={true}
  description="결과코드"
  example="0000"
  values={[
    "0000: 성공",
    "기타: 실패코드"
  ]}
/>

<DocParameterCard
  name="resultMsg"
  type="string"
  required={true}
  description="결과메시지"
  example="정상적으로 처리되었습니다."
/>

<DocParameterCard
  name="vbankNo"
  type="string"
  required={true}
  description="가상계좌번호"
  example="1234567890123456"
/>

<DocParameterCard
  name="vbankNm"
  type="string"
  required={true}
  description="가상계좌 은행명"
  example="국민은행"
/>

<DocParameterCard
  name="expDt"
  type="string"
  required={true}
  description="가상계좌 만료일 (YYYYMMDD)"
  example="20231222"
/>

### 실패 응답

<DocParameterCard
  name="resultCode"
  type="string"
  required={true}
  description="결과코드"
  example="1003"
  values={[
    "1003: 가상계좌 발급 실패",
    "기타: 각종 오류코드"
  ]}
/>

<DocParameterCard
  name="resultMsg"
  type="string"
  required={true}
  description="결과메시지"
  example="가상계좌 발급에 실패했습니다."
/>

<DocParameterCard
  name="vbankNo"
  type="string"
  required={false}
  description="가상계좌번호 (실패시 null)"
  example="null"
/>

<DocParameterCard
  name="vbankNm"
  type="string"
  required={false}
  description="가상계좌 은행명 (실패시 null)"
  example="null"
/>

<DocParameterCard
  name="expDt"
  type="string"
  required={false}
  description="가상계좌 만료일 (실패시 null)"
  example="null"
/>

## 🔧 구현 예시

### JavaScript

```javascript
// 가상계좌 채번 API 호출
async function callVirtualAccountAPI(params) {
  const response = await fetch('https://tbgw.settlebank.co.kr/spay/APIVBank.do', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(params)
  });
  
  return await response.json();
}

// 사용 예시
const vbankParams = {
  mchtId: "nxca_jt_bi",
  mchtTrdNo: "VBANK" + Date.now(),
  trdDt: new Date().toISOString().slice(0, 10).replace(/-/g, ''),
  trdTm: new Date().toTimeString().slice(0, 8).replace(/:/g, ''),
  trdAmt: "10000",
  pktHash: "생성된해시값",
  expDt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().slice(0, 10).replace(/-/g, ''),
  bankCd: "004" // 국민은행
};

const result = await callVirtualAccountAPI(vbankParams);
if (result.resultCode === "0000") {
  console.log('가상계좌 발급 성공:');
  console.log('- 계좌번호:', result.vbankNo);
  console.log('- 은행명:', result.vbankNm);
  console.log('- 만료일:', result.expDt);
  
  // 고객에게 가상계좌 정보 안내
  alert(`입금계좌: ${result.vbankNm} ${result.vbankNo}\n만료일: ${result.expDt}`);
} else {
  console.error('가상계좌 발급 실패:', result.resultMsg);
}
```

### Python

```python
import requests
import json
from datetime import datetime, timedelta

# 가상계좌 채번 API 호출
def call_virtual_account_api(params):
    url = 'https://tbgw.settlebank.co.kr/spay/APIVBank.do'
    response = requests.post(url, json=params)
    return response.json()

# 사용 예시
current_time = datetime.now()
exp_date = (current_time + timedelta(days=7)).strftime("%Y%m%d")

vbank_params = {
    "mchtId": "nxca_jt_bi",
    "mchtTrdNo": f"VBANK{int(current_time.timestamp())}",
    "trdDt": current_time.strftime("%Y%m%d"),
    "trdTm": current_time.strftime("%H%M%S"),
    "trdAmt": "10000",
    "pktHash": "생성된해시값",
    "expDt": exp_date,
    "bankCd": "004"  # 국민은행
}

result = call_virtual_account_api(vbank_params)
if result["resultCode"] == "0000":
    print('가상계좌 발급 성공:')
    print(f'- 계좌번호: {result["vbankNo"]}')
    print(f'- 은행명: {result["vbankNm"]}')
    print(f'- 만료일: {result["expDt"]}')
    
    # 고객에게 가상계좌 정보 안내
    print(f"입금계좌: {result['vbankNm']} {result['vbankNo']}")
    print(f"만료일: {result['expDt']}")
else:
    print('가상계좌 발급 실패:', result["resultMsg"])
```

## ⚠️ 주의사항

- 가상계좌는 발급 후 만료일까지 유효합니다.
- 만료일 이후에는 입금이 불가능하며, 자동으로 폐기됩니다.
- 입금금액이 설정된 금액과 정확히 일치해야 자동 승인됩니다.
- 가상계좌 발급 후 입금까지는 시간이 소요될 수 있습니다.
- 입금 완료 시 별도의 노티피케이션을 받을 수 있습니다.
- 가상계좌번호는 고유하며, 중복 발급되지 않습니다.


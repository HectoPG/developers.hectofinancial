---
title: ê±°ë˜ ìƒíƒœ ì¡°íšŒ
description: ì‹¤ì‹œê°„ ê±°ë˜ ìƒíƒœ ì¡°íšŒ API
category: ê±°ë˜ ê´€ë¦¬ API
path: /spay/APITrdStatInq.do
method: POST
testUrl: https://tbgw.settlebank.co.kr/spay/APITrdStatInq.do
prodUrl: https://gw.settlebank.co.kr/spay/APITrdStatInq.do
---

# ê±°ë˜ ìƒíƒœ ì¡°íšŒ

ì‹¤ì‹œê°„ ê±°ë˜ ìƒíƒœ ì¡°íšŒ APIì…ë‹ˆë‹¤. íŠ¹ì • ê±°ë˜ì˜ í˜„ì¬ ìƒíƒœì™€ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“¡ API ì •ë³´

| í•­ëª© | ê°’ |
|------|-----|
| **HTTP Method** | `POST` |
| **ê²½ë¡œ** | `/spay/APITrdStatInq.do` |
| **í…ŒìŠ¤íŠ¸ URL** | `https://tbgw.settlebank.co.kr/spay/APITrdStatInq.do` |
| **ìš´ì˜ URL** | `https://gw.settlebank.co.kr/spay/APITrdStatInq.do` |

## ğŸ“‹ ìš”ì²­ íŒŒë¼ë¯¸í„°

<ParameterCard
  name="mchtId"
  type="string(10)"
  required={true}
  description="í—¥í† íŒŒì´ë‚¸ì…œì—ì„œ ë¶€ì—¬í•˜ëŠ” ê³ ìœ  ìƒì ì•„ì´ë””ì…ë‹ˆë‹¤."
  example="nxca_jt_bi"
/>

<ParameterCard
  name="mchtTrdNo"
  type="string(100)"
  required={true}
  description="ìƒì ì—ì„œ ìƒì„±í•œ ê³ ìœ  ì£¼ë¬¸ë²ˆí˜¸ì…ë‹ˆë‹¤."
  example="ORDER20231215143022"
/>

<ParameterCard
  name="trdDt"
  type="string(8)"
  required={true}
  description="ê±°ë˜ ìš”ì²­ ì¼ìì…ë‹ˆë‹¤. yyyyMMdd í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."
  example="20231215"
/>

<ParameterCard
  name="trdTm"
  type="string(6)"
  required={true}
  description="ê±°ë˜ ìš”ì²­ ì‹œê°„ì…ë‹ˆë‹¤. HHMMSS í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."
  example="143022"
/>

<ParameterCard
  name="method"
  type="string(2)"
  required={true}
  description="ê²°ì œìˆ˜ë‹¨ ì½”ë“œì…ë‹ˆë‹¤."
  example="CA"
  values={[
    "CA: ì‹ ìš©ì¹´ë“œ",
    "BT: ê³„ì¢Œì´ì²´",
    "MP: íœ´ëŒ€í°ê²°ì œ",
    "VB: ê°€ìƒê³„ì¢Œ"
  ]}
/>

<ParameterCard
  name="trdAmt"
  type="string(12)"
  required={true}
  description="ê±°ë˜ê¸ˆì•¡ì…ë‹ˆë‹¤."
  example="1000"
/>

<ParameterCard
  name="pktHash"
  type="string(64)"
  required={true}
  description="SHA256 ë°©ì‹ìœ¼ë¡œ ìƒì„±í•œ í•´ì‰¬ê°’ì…ë‹ˆë‹¤."
  example="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  note="ğŸ”’ ê±°ë˜ì¼ì + ê±°ë˜ì‹œê°„ + ìƒì ì•„ì´ë”” + ìƒì ì£¼ë¬¸ë²ˆí˜¸ + ê²°ì œìˆ˜ë‹¨ + ê±°ë˜ê¸ˆì•¡ + í•´ì‰¬í‚¤ ìˆœì„œë¡œ ì¡°í•©"
/>

## ğŸ’» ìš”ì²­ ì˜ˆì‹œ

### ì‹ ìš©ì¹´ë“œ ê±°ë˜ ì¡°íšŒ

```json
{
  "mchtId": "nxca_jt_bi",
  "mchtTrdNo": "ORDER20231215143022",
  "trdDt": "20231215",
  "trdTm": "143022",
  "method": "CA",
  "trdAmt": "1000",
  "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
}
```

### ê°€ìƒê³„ì¢Œ ê±°ë˜ ì¡°íšŒ

```json
{
  "mchtId": "nxca_jt_bi",
  "mchtTrdNo": "VBANK20231215143022",
  "trdDt": "20231215",
  "trdTm": "143022",
  "method": "VB",
  "trdAmt": "10000",
  "pktHash": "f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
}
```

## ğŸ“¤ ì‘ë‹µ ì˜ˆì‹œ

### ì„±ê³µ ì‘ë‹µ

```json
{
  "resultCode": "0000",
  "resultMsg": "ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "trdStat": "0021",
  "trdNo": "STFP_PGCAnxca_jt_il0211129135810M1494620",
  "mchtTrdNo": "ORDER20231215143022",
  "trdAmt": "1000",
  "payDt": "20231215",
  "payTm": "143025"
}
```

### ê±°ë˜ ì—†ìŒ ì‘ë‹µ

```json
{
  "resultCode": "1004",
  "resultMsg": "í•´ë‹¹ ê±°ë˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
  "trdStat": null,
  "trdNo": null,
  "mchtTrdNo": null,
  "trdAmt": null,
  "payDt": null,
  "payTm": null
}
```

## ğŸ“Š ê±°ë˜ ìƒíƒœ ì½”ë“œ

| ì½”ë“œ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| `0021` | ì„±ê³µ | ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ëœ ê±°ë˜ |
| `0031` | ì‹¤íŒ¨ | ê±°ë˜ ì‹¤íŒ¨ |
| `0041` | ëŒ€ê¸° | ì²˜ë¦¬ ëŒ€ê¸° ì¤‘ |
| `0051` | ì§„í–‰ì¤‘ | ì²˜ë¦¬ ì§„í–‰ ì¤‘ |

## ğŸ”§ êµ¬í˜„ ì˜ˆì‹œ

### JavaScript

```javascript
// ê±°ë˜ ìƒíƒœ ì¡°íšŒ API í˜¸ì¶œ
async function callTransactionInquiryAPI(params) {
  const response = await fetch('https://tbgw.settlebank.co.kr/spay/APITrdStatInq.do', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(params)
  });
  
  return await response.json();
}

// ì‚¬ìš© ì˜ˆì‹œ
const inquiryParams = {
  mchtId: "nxca_jt_bi",
  mchtTrdNo: "ORDER20231215143022",
  trdDt: "20231215",
  trdTm: "143022",
  method: "CA",
  trdAmt: "1000",
  pktHash: "ìƒì„±ëœí•´ì‹œê°’"
};

const result = await callTransactionInquiryAPI(inquiryParams);
if (result.resultCode === "0000") {
  console.log('ê±°ë˜ ì¡°íšŒ ì„±ê³µ:');
  console.log('- ê±°ë˜ë²ˆí˜¸:', result.trdNo);
  console.log('- ê±°ë˜ìƒíƒœ:', result.trdStat);
  console.log('- ê±°ë˜ê¸ˆì•¡:', result.trdAmt);
  console.log('- ê²°ì œì¼ì‹œ:', result.payDt, result.payTm);
  
  // ê±°ë˜ ìƒíƒœì— ë”°ë¥¸ ì²˜ë¦¬
  switch(result.trdStat) {
    case "0021":
      console.log('âœ… ê²°ì œ ì™„ë£Œ');
      break;
    case "0031":
      console.log('âŒ ê²°ì œ ì‹¤íŒ¨');
      break;
    case "0041":
    case "0051":
      console.log('â³ ì²˜ë¦¬ ì¤‘...');
      break;
  }
} else {
  console.error('ê±°ë˜ ì¡°íšŒ ì‹¤íŒ¨:', result.resultMsg);
}

// ì£¼ê¸°ì  ê±°ë˜ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
async function checkTransactionStatus(mchtTrdNo, maxAttempts = 10) {
  for (let i = 0; i < maxAttempts; i++) {
    const result = await callTransactionInquiryAPI({
      ...inquiryParams,
      mchtTrdNo: mchtTrdNo
    });
    
    if (result.resultCode === "0000") {
      if (result.trdStat === "0021") {
        console.log('âœ… ê²°ì œ ì™„ë£Œ í™•ì¸ë¨');
        return true;
      } else if (result.trdStat === "0031") {
        console.log('âŒ ê²°ì œ ì‹¤íŒ¨');
        return false;
      }
    }
    
    // 5ì´ˆ ëŒ€ê¸° í›„ ì¬ì‹œë„
    await new Promise(resolve => setTimeout(resolve, 5000));
  }
  
  console.log('â° ì¡°íšŒ ì‹œê°„ ì´ˆê³¼');
  return false;
}
```

### Python

```python
import requests
import json
import time

# ê±°ë˜ ìƒíƒœ ì¡°íšŒ API í˜¸ì¶œ
def call_transaction_inquiry_api(params):
    url = 'https://tbgw.settlebank.co.kr/spay/APITrdStatInq.do'
    response = requests.post(url, json=params)
    return response.json()

# ì‚¬ìš© ì˜ˆì‹œ
inquiry_params = {
    "mchtId": "nxca_jt_bi",
    "mchtTrdNo": "ORDER20231215143022",
    "trdDt": "20231215",
    "trdTm": "143022",
    "method": "CA",
    "trdAmt": "1000",
    "pktHash": "ìƒì„±ëœí•´ì‹œê°’"
}

result = call_transaction_inquiry_api(inquiry_params)
if result["resultCode"] == "0000":
    print('ê±°ë˜ ì¡°íšŒ ì„±ê³µ:')
    print(f'- ê±°ë˜ë²ˆí˜¸: {result["trdNo"]}')
    print(f'- ê±°ë˜ìƒíƒœ: {result["trdStat"]}')
    print(f'- ê±°ë˜ê¸ˆì•¡: {result["trdAmt"]}')
    print(f'- ê²°ì œì¼ì‹œ: {result["payDt"]} {result["payTm"]}')
    
    # ê±°ë˜ ìƒíƒœì— ë”°ë¥¸ ì²˜ë¦¬
    trd_stat = result["trdStat"]
    if trd_stat == "0021":
        print('âœ… ê²°ì œ ì™„ë£Œ')
    elif trd_stat == "0031":
        print('âŒ ê²°ì œ ì‹¤íŒ¨')
    elif trd_stat in ["0041", "0051"]:
        print('â³ ì²˜ë¦¬ ì¤‘...')
else:
    print('ê±°ë˜ ì¡°íšŒ ì‹¤íŒ¨:', result["resultMsg"])

# ì£¼ê¸°ì  ê±°ë˜ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
def check_transaction_status(mcht_trd_no, max_attempts=10):
    for i in range(max_attempts):
        result = call_transaction_inquiry_api({
            **inquiry_params,
            "mchtTrdNo": mcht_trd_no
        })
        
        if result["resultCode"] == "0000":
            trd_stat = result["trdStat"]
            if trd_stat == "0021":
                print('âœ… ê²°ì œ ì™„ë£Œ í™•ì¸ë¨')
                return True
            elif trd_stat == "0031":
                print('âŒ ê²°ì œ ì‹¤íŒ¨')
                return False
        
        # 5ì´ˆ ëŒ€ê¸° í›„ ì¬ì‹œë„
        time.sleep(5)
    
    print('â° ì¡°íšŒ ì‹œê°„ ì´ˆê³¼')
    return False
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

- ê±°ë˜ ìƒíƒœ ì¡°íšŒëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©°, ì¡°íšŒ ì‹œì ì˜ ìƒíƒœë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- ê±°ë˜ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì˜ëª»ëœ ì •ë³´ë¡œ ì¡°íšŒ ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì¡°íšŒ ê°€ëŠ¥í•œ ê±°ë˜ ê¸°ê°„ì—ëŠ” ì œí•œì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ëŒ€ëŸ‰ ì¡°íšŒ ì‹œì—ëŠ” API í˜¸ì¶œ ì œí•œì— ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
- ê±°ë˜ ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ë™ì•ˆ ì¡°íšŒ ì‹œ ì¼ì‹œì ìœ¼ë¡œ ë‹¤ë¥¸ ìƒíƒœê°€ ë°˜í™˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


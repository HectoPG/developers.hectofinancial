
# ğŸ“Š ê±°ë˜ ì¡°íšŒ ë° ê´€ë¦¬

ê²°ì œ ê±°ë˜ì˜ ì‹¤ì‹œê°„ ì¡°íšŒ, ê±°ë˜ëŒ€ì‚¬, ì •ì‚°ëŒ€ì‚¬ ë“± ê±°ë˜ ê´€ë¦¬ë¥¼ ìœ„í•œ API ê°€ì´ë“œì…ë‹ˆë‹¤. ì•ˆì •ì ì¸ ê²°ì œ ì„œë¹„ìŠ¤ ìš´ì˜ì„ ìœ„í•œ í•„ìˆ˜ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“– ê°œìš”

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

<FeatureGrid features={[
  {
    icon: "ğŸ”",
    title: "ì‹¤ì‹œê°„ ê±°ë˜ ì¡°íšŒ",
    description: "ê°œë³„ ê±°ë˜ì˜ ìƒì„¸ ì •ë³´ì™€ í˜„ì¬ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸",
    bgColor: "from-hecto-50 to-hecto-100",
    borderColor: "border-hecto-200",
    iconBgColor: "bg-hecto-400"
  },
  {
    icon: "ğŸ“‹",
    title: "ê±°ë˜ëŒ€ì‚¬",
    description: "ì¼ìë³„ ì „ì²´ ê±°ë˜ ë‚´ì—­ì„ ì¡°íšŒí•˜ì—¬ ê±°ë˜ ë°ì´í„° ê²€ì¦",
    bgColor: "from-hecto-50 to-hecto-100",
    borderColor: "border-hecto-200",
    iconBgColor: "bg-hecto-400"
  },
  {
    icon: "ğŸ’°",
    title: "ì •ì‚°ëŒ€ì‚¬",
    description: "ì •ì‚° ì˜ˆì • ê±°ë˜ì™€ ìˆ˜ìˆ˜ë£Œ ì •ë³´ë¥¼ í™•ì¸í•˜ì—¬ ì •ì‚° ê´€ë¦¬",
    bgColor: "from-hecto-50 to-hecto-100",
    borderColor: "border-hecto-200",
    iconBgColor: "bg-hecto-400"
  }
]} />

### ğŸ”§ API ì¢…ë¥˜

| API | ìš©ë„ | ì£¼ìš” ì •ë³´ |
|-----|------|-----------|
| **ì‹¤ì‹œê°„ ê±°ë˜ ì¡°íšŒ** | ê°œë³„ ê±°ë˜ ìƒíƒœ í™•ì¸ | ê±°ë˜ ìƒíƒœ, ì·¨ì†Œ ê¸ˆì•¡, ê²°ì œ ì •ë³´ |
| **ê±°ë˜ëŒ€ì‚¬** | ì¼ìë³„ ê±°ë˜ ë‚´ì—­ ì¡°íšŒ | ìŠ¹ì¸/ì·¨ì†Œ êµ¬ë¶„, ê±°ë˜ ê¸ˆì•¡, ì¹´ë“œì‚¬ ì •ë³´ |
| **ì •ì‚°ëŒ€ì‚¬** | ì •ì‚° ì˜ˆì • ë‚´ì—­ ì¡°íšŒ | ìˆ˜ìˆ˜ë£Œ, ë¶€ê°€ì„¸, ì •ì‚° ì˜ˆì •ì¼, ì •ì‚° ê¸ˆì•¡ |

---

## ğŸ” ì‹¤ì‹œê°„ ê±°ë˜ ì¡°íšŒ API

ê°œë³„ ê±°ë˜ì˜ í˜„ì¬ ìƒíƒœì™€ ìƒì„¸ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” APIì…ë‹ˆë‹¤.

### ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

| í™˜ê²½ | URL |
|------|-----|
| **í…ŒìŠ¤íŠ¸** | `https://tbgw.settlebank.co.kr/spay/APITrdStatInq.do` |
| **ìš´ì˜** | `https://gw.settlebank.co.kr/spay/APITrdStatInq.do` |

### ğŸ“‹ ìš”ì²­ íŒŒë¼ë¯¸í„°

<DocParameterCard
  name="mchtId"
  type="string(12)"
  required={true}
  description="í—¥í† íŒŒì´ë‚¸ì…œì—ì„œ ë¶€ì—¬í•˜ëŠ” ê³ ìœ  ìƒì ì•„ì´ë””ì…ë‹ˆë‹¤."
  example="nx_mid_il"
/>

<DocParameterCard
  name="ver"
  type="string(4)"
  required={true}
  description="ì „ë¬¸ì˜ ë²„ì „ì…ë‹ˆë‹¤."
  example="0A1M"
  note="ê³ ì •ê°’ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤."
/>

<DocParameterCard
  name="mchtTrdNo"
  type="string(100)"
  required={true}
  description="ìƒì ì—ì„œ ìƒì„±í•œ ê³ ìœ  ì£¼ë¬¸ë²ˆí˜¸ì…ë‹ˆë‹¤."
  example="ORDER20231215143022"
/>

<DocParameterCard
  name="trdDt"
  type="string(8)"
  required={true}
  description="ê±°ë˜ ìš”ì²­ ì¼ìì…ë‹ˆë‹¤. YYYYMMDD í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."
  example="20231215"
/>

<DocParameterCard
  name="trdTm"
  type="string(6)"
  required={true}
  description="ê±°ë˜ ìš”ì²­ ì‹œê°„ì…ë‹ˆë‹¤. HHMMSS í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."
  example="143022"
/>

<DocParameterCard
  name="method"
  type="string(2)"
  required={true}
  description="ê²°ì œìˆ˜ë‹¨ ì½”ë“œì…ë‹ˆë‹¤."
  values={[
    "CA: ì‹ ìš©ì¹´ë“œ",
    "VA: ê°€ìƒê³„ì¢Œ", 
    "RA: ê³„ì¢Œì´ì²´",
    "MP: íœ´ëŒ€í°ê²°ì œ",
    "BG: ë„ì„œìƒí’ˆê¶Œ",
    "CG: ì»¬ì³ëœë“œìƒí’ˆê¶Œ",
    "HM: í•´í”¼ë¨¸ë‹ˆ",
    "TC: í‹´ìºì‹œ",
    "CP: í¬ì¸íŠ¸ë‹¤ëª¨ì•„",
    "KP: ì¹´ì¹´ì˜¤í˜ì´",
    "NP: ë„¤ì´ë²„í˜ì´",
    "PC: í˜ì´ì½”"
  ]}
/>

<DocParameterCard
  name="trdAmt"
  type="number(12)"
  required={true}
  description="ê±°ë˜ê¸ˆì•¡ì…ë‹ˆë‹¤."
  example="5000"
  note="1,000ì›ì€ 1000ìœ¼ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."
/>

<DocParameterCard
  name="orgTrdDt"
  type="string(8)"
  required={true}
  description="ì›ê±°ë˜ ê²°ì œ ìš”ì²­ì‹œ ìš”ì²­ì¼ìì…ë‹ˆë‹¤."
  example="20231215"
/>

<DocParameterCard
  name="orgMchtTrdNo"
  type="string(100)"
  required={true}
  description="ì›ê±°ë˜ì˜ ìƒì ì£¼ë¬¸ë²ˆí˜¸ì…ë‹ˆë‹¤."
  example="ORDER20231215143022"
/>

<DocParameterCard
  name="orgTrdNo"
  type="string(40)"
  required={false}
  description="ê²°ì œ ì‹œ í—¥í† íŒŒì´ë‚¸ì…œì—ì„œ ë°œê¸‰í•œ ê±°ë˜ë²ˆí˜¸ì…ë‹ˆë‹¤."
  example="STFP_PGCAnxca_jt_il0231215143022M1494620"
/>

<DocParameterCard
  name="pktHash"
  type="string(200)"
  required={true}
  description="ìœ„ë³€ì¡° ë°©ì§€ë¥¼ ìœ„í•œ SHA256 í•´ì‹œê°’ì…ë‹ˆë‹¤."
  example="346a2496f3e8b2cbb2ebd157eee0f7404c4e97c34d3cefe8a9b0113cc93f8cc1"
  note="ğŸ”’ ê±°ë˜ì¼ì + ê±°ë˜ì‹œê°„ + ìƒì ì•„ì´ë”” + ìƒì ì£¼ë¬¸ë²ˆí˜¸ + ê±°ë˜ê¸ˆì•¡(í‰ë¬¸) + í•´ì‹œí‚¤ ìˆœì„œë¡œ ì¡°í•©"
/>

### ğŸ’» ì‹¤ì‹œê°„ ê±°ë˜ ì¡°íšŒ êµ¬í˜„

```javascript
const crypto = require('crypto');

// ì‹¤ì‹œê°„ ê±°ë˜ ì¡°íšŒ API í˜¸ì¶œ
async function inquireTransactionStatus(params) {
    // í•´ì‹œ ìƒì„±
    const hashData = 
        params.trdDt +          // ê±°ë˜ì¼ì
        params.trdTm +          // ê±°ë˜ì‹œê°„
        params.mchtId +         // ìƒì ì•„ì´ë””
        params.mchtTrdNo +      // ìƒì ì£¼ë¬¸ë²ˆí˜¸
        params.trdAmt +         // ê±°ë˜ê¸ˆì•¡(í‰ë¬¸)
        params.hashKey;         // í•´ì‹œí‚¤
    
    const pktHash = crypto.createHash('sha256').update(hashData, 'utf8').digest('hex');
    
    const requestData = {
        params: {
            mchtId: params.mchtId,
            ver: "0A1M",
            mchtTrdNo: params.mchtTrdNo,
            trdDt: params.trdDt,
            trdTm: params.trdTm
        },
        data: {
            pktHash: pktHash,
            method: params.method,
            trdAmt: params.trdAmt,
            orgTrdDt: params.orgTrdDt,
            orgMchtTrdNo: params.orgMchtTrdNo,
            orgTrdNo: params.orgTrdNo
        }
    };
    
    try {
        const response = await fetch('https://tbgw.settlebank.co.kr/spay/APITrdStatInq.do', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json; charset=UTF-8'
            },
            body: JSON.stringify(requestData)
        });
        
        const result = await response.json();
        
        if (result.outStatCd === '0021' && result.outRsltCd === '0000') {
            console.log('ê±°ë˜ ì¡°íšŒ ì„±ê³µ:', result);
            return {
                success: true,
                transactionInfo: {
                    mchtId: result.mchtId,
                    trdNo: result.trdNo,
                    method: result.method,
                    trdAmt: result.trdAmt,
                    cnclAmt: result.cnclAmt,
                    status: getTransactionStatus(result.outRsltCd)
                }
            };
        } else {
            console.error('ê±°ë˜ ì¡°íšŒ ì‹¤íŒ¨:', result.outRsltMsg);
            return {
                success: false,
                error: result.outRsltMsg,
                errorCode: result.outRsltCd
            };
        }
    } catch (error) {
        console.error('API í˜¸ì¶œ ì‹¤íŒ¨:', error);
        throw error;
    }
}

// ê±°ë˜ ìƒíƒœ í•´ì„
function getTransactionStatus(resultCode) {
    const statusMap = {
        '0000': 'ì •ìƒê±°ë˜',
        '0001': 'ì·¨ì†Œìƒíƒœ', 
        '0009': 'ê²°ì œì‹¤íŒ¨'
    };
    return statusMap[resultCode] || 'ê¸°íƒ€ ìƒíƒœ';
}

// ì‚¬ìš© ì˜ˆì‹œ
const inquiryParams = {
    mchtId: "nx_mid_il",
    mchtTrdNo: "ORDER20231215143022",
    trdDt: "20231215",
    trdTm: "143022",
    method: "CA",
    trdAmt: "5000",
    orgTrdDt: "20231215",
    orgMchtTrdNo: "ORDER20231215143022",
    hashKey: "your-hash-key-from-hecto"
};

inquireTransactionStatus(inquiryParams)
    .then(result => {
        if (result.success) {
            console.log('ê±°ë˜ ìƒíƒœ:', result.transactionInfo.status);
            console.log('ì·¨ì†Œ ê¸ˆì•¡:', result.transactionInfo.cnclAmt);
        } else {
            console.log('ì¡°íšŒ ì‹¤íŒ¨:', result.error);
        }
    });
```

### ğŸ“¨ ì‘ë‹µ ì •ë³´

```javascript
{
    "outStatCd": "0021",              // ê±°ë˜ìƒíƒœì½”ë“œ (0021:ì„±ê³µ, 0031:ì‹¤íŒ¨)
    "outRsltCd": "0000",              // ê²°ê³¼ì½”ë“œ (0000:ì •ìƒ, 0001:ì·¨ì†Œ, 0009:ì‹¤íŒ¨)
    "outRsltMsg": "ì •ìƒê±°ë˜",          // ê²°ê³¼ë©”ì‹œì§€
    "mchtId": "nx_mid_il",            // ìƒì ì•„ì´ë””
    "trdNo": "STFP_PGHMnx_mid_il00220623130711M1872705", // ê±°ë˜ë²ˆí˜¸
    "method": "CA",                   // ê²°ì œìˆ˜ë‹¨
    "trdAmt": "5000",                 // ê±°ë˜ê¸ˆì•¡
    "cnclAmt": "0"                    // ì·¨ì†Œê¸ˆì•¡ (ì·¨ì†Œê±´ ë¯¸ì¡´ì¬ì‹œ 0ì›)
}
```

---

## ğŸ“‹ ê±°ë˜ëŒ€ì‚¬ API

ì¼ìë³„ ì „ì²´ ê±°ë˜ ë‚´ì—­ì„ ì¡°íšŒí•˜ì—¬ ê±°ë˜ ë°ì´í„°ë¥¼ ê²€ì¦í•˜ëŠ” APIì…ë‹ˆë‹¤.

### ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

| í™˜ê²½ | URL | HTTP Method |
|------|-----|-------------|
| **í…ŒìŠ¤íŠ¸** | `https://tb-nspay.settlebank.co.kr/api/pg/{ìƒì ì•„ì´ë””}/transInfo.do` | GET/POST |
| **ìš´ì˜** | `https://nspay.settlebank.co.kr/api/pg/{ìƒì ì•„ì´ë””}/transInfo.do` | GET/POST |

### ğŸ“‹ ìš”ì²­ íŒŒë¼ë¯¸í„°

<DocParameterCard
  name="mchtId"
  type="string(10)"
  required={true}
  description="í—¥í† íŒŒì´ë‚¸ì…œì—ì„œ ë¶€ì—¬í•˜ëŠ” ê³ ìœ  ìƒì ì•„ì´ë””ì…ë‹ˆë‹¤."
  example="nxca_jt_il"
/>

<DocParameterCard
  name="mchtTy"
  type="string(1)"
  required={true}
  description="ìƒì ì•„ì´ë”” êµ¬ë¶„ê°’ì…ë‹ˆë‹¤."
  example="M"
  note="ê³ ì •ê°’ìœ¼ë¡œ 'M'ì„ ì‚¬ìš©í•©ë‹ˆë‹¤."
/>

<DocParameterCard
  name="method"
  type="string(2)"
  required={true}
  description="ì¡°íšŒí•  ê²°ì œìˆ˜ë‹¨ ì½”ë“œì…ë‹ˆë‹¤."
  example="CA"
  values={[
    "CA: ì‹ ìš©ì¹´ë“œ",
    "VA: ê°€ìƒê³„ì¢Œ",
    "RA: ê³„ì¢Œì´ì²´",
    "MP: íœ´ëŒ€í°ê²°ì œ"
  ]}
/>

<DocParameterCard
  name="pdTy"
  type="string(1)"
  required={true}
  description="ì¡°íšŒê¸°ê°„ êµ¬ë¶„ ì½”ë“œì…ë‹ˆë‹¤."
  example="D"
  note="ê³ ì •ê°’ìœ¼ë¡œ 'D'ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤."
/>

<DocParameterCard
  name="trdDtSt"
  type="string(8)"
  required={true}
  description="ì¡°íšŒí•  ê±°ë˜ì¼ìì…ë‹ˆë‹¤. YYYYMMDD í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."
  example="20231215"
/>

<DocParameterCard
  name="pktHash"
  type="string(200)"
  required={true}
  description="ìœ„ë³€ì¡° ë°©ì§€ë¥¼ ìœ„í•œ SHA256 í•´ì‹œê°’ì…ë‹ˆë‹¤."
  example="346a2496f3e8b2cbb2ebd157eee0f7404c4e97c34d3cefe8a9b0113cc93f8cc1"
  note="ğŸ”’ ìƒì ì•„ì´ë”” + ê±°ë˜ì¼ì + ì¸ì¦í‚¤ ìˆœì„œë¡œ ì¡°í•©"
/>

### ğŸ’» ê±°ë˜ëŒ€ì‚¬ API êµ¬í˜„

```javascript
// ê±°ë˜ëŒ€ì‚¬ API í˜¸ì¶œ
async function getTransactionReconciliation(params) {
    // í•´ì‹œ ìƒì„±
    const hashData = 
        params.mchtId +         // ìƒì ì•„ì´ë””
        params.trdDtSt +        // ê±°ë˜ì¼ì
        params.authKey;         // ì¸ì¦í‚¤
    
    const pktHash = crypto.createHash('sha256').update(hashData, 'utf8').digest('hex');
    
    const requestParams = new URLSearchParams({
        mchtId: params.mchtId,
        mchtTy: 'M',
        method: params.method,
        pdTy: 'D',
        trdDtSt: params.trdDtSt,
        pktHash: pktHash
    });
    
    try {
        const response = await fetch(
            `https://tb-nspay.settlebank.co.kr/api/pg/${params.mchtId}/transInfo.do`,
            {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
                },
                body: requestParams
            }
        );
        
        const responseText = await response.text();
        const lines = responseText.trim().split('\n');
        
        // ì²« ë²ˆì§¸ ì¤„: ê²°ê³¼ ì •ë³´
        const [resultCode, resultMessage, recordCount] = lines[0].split('|');
        
        if (resultCode === '0000') {
            const transactions = [];
            
            // ë‘ ë²ˆì§¸ ì¤„ë¶€í„°: ê±°ë˜ ë‚´ì—­
            for (let i = 1; i < lines.length; i++) {
                const fields = lines[i].split('|');
                transactions.push(parseTransactionRecord(fields));
            }
            
            return {
                success: true,
                resultCode,
                resultMessage,
                recordCount: parseInt(recordCount),
                transactions
            };
        } else {
            return {
                success: false,
                resultCode,
                resultMessage,
                recordCount: parseInt(recordCount)
            };
        }
    } catch (error) {
        console.error('ê±°ë˜ëŒ€ì‚¬ API í˜¸ì¶œ ì‹¤íŒ¨:', error);
        throw error;
    }
}

// ê±°ë˜ ë ˆì½”ë“œ íŒŒì‹±
function parseTransactionRecord(fields) {
    return {
        mchtId: fields[0],              // ìƒì ì•„ì´ë””
        method: fields[1],              // ê²°ì œìˆ˜ë‹¨
        trdNo: fields[2],               // í—¥í† íŒŒì´ë‚¸ì…œ ê±°ë˜ë²ˆí˜¸
        mchtTrdNo: fields[3],           // ì£¼ë¬¸ë²ˆí˜¸
        apprType: fields[4],            // ìŠ¹ì¸êµ¬ë¶„ (0:ìŠ¹ì¸, 1:ì·¨ì†Œ)
        trdDt: fields[5],               // ê±°ë˜ì¼ì
        trdTm: fields[6],               // ê±°ë˜ì‹œê°„
        trdAmt: parseInt(fields[7]),    // ê±°ë˜ê¸ˆì•¡
        orgTrdNo: fields[8],            // ì›ê±°ë˜ë²ˆí˜¸
        orgTrdDt: fields[9],            // ì›ê±°ë˜ì¼ì
        custNm: fields[10],             // ì£¼ë¬¸ìëª…
        prdtNm: fields[11],             // ìƒí’ˆëª…
        apprNo: fields[12],             // ìŠ¹ì¸ë²ˆí˜¸
        fnNm: fields[13],               // ê¸ˆìœµì‚¬
        instmtMon: fields[14],          // í• ë¶€ê°œì›”
        noIntYn: fields[15]             // ë¬´ì´ìí• ë¶€ì—¬ë¶€
    };
}

// ì‚¬ìš© ì˜ˆì‹œ
const reconciliationParams = {
    mchtId: "nxca_jt_il",
    method: "CA",
    trdDtSt: "20231215",
    authKey: "your-auth-key-from-hecto"
};

getTransactionReconciliation(reconciliationParams)
    .then(result => {
        if (result.success) {
            console.log(`ì´ ${result.recordCount}ê±´ì˜ ê±°ë˜ ì¡°íšŒ`);
            result.transactions.forEach(tx => {
                console.log(`${tx.trdDt} ${tx.trdTm} - ${tx.prdtNm}: ${tx.trdAmt}ì› (${tx.apprType === '0' ? 'ìŠ¹ì¸' : 'ì·¨ì†Œ'})`);
            });
        } else {
            console.log('ê±°ë˜ëŒ€ì‚¬ ì‹¤íŒ¨:', result.resultMessage);
        }
    });
```

### ğŸ“Š ê±°ë˜ëŒ€ì‚¬ ì‘ë‹µ ì˜ˆì‹œ

**ì„±ê³µ ì‘ë‹µ:**
```
0000|ì •ìƒ ì²˜ë¦¬ ë˜ì—ˆìŠµë‹ˆë‹¤.|3|
mid_test|VA|STBK_PGVAmid_test000000000000000M0000001|TEST000000000000000001|0|20231215|100001|1000|||í™ê¸¸ë™|í…ŒìŠ¤íŠ¸ìƒí’ˆ||ì¼€ì´ë±…í¬|||
mid_test|VA|STBK_PGVAmid_test000000000000000M0000002|TEST000000000000000002|0|20231215|100002|2000|||í™ê¸¸ë™|í…ŒìŠ¤íŠ¸ìƒí’ˆ||ì¼€ì´ë±…í¬|||
mid_test|VA|STBK_PGVAmid_test000000000000000M0000003|TEST000000000000000003|0|20231215|100003|3000|||í™ê¸¸ë™|í…ŒìŠ¤íŠ¸ìƒí’ˆ||ì¼€ì´ë±…í¬|||
```

**ì‹¤íŒ¨ ì‘ë‹µ:**
```
ST92|í•´ì‰¬ ê°’ ë¶ˆì¼ì¹˜.|0|
```

---

## ğŸ’° ì •ì‚°ëŒ€ì‚¬ API

ì •ì‚° ì˜ˆì • ê±°ë˜ì™€ ìˆ˜ìˆ˜ë£Œ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” APIì…ë‹ˆë‹¤.

### ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

| í™˜ê²½ | URL | HTTP Method |
|------|-----|-------------|
| **í…ŒìŠ¤íŠ¸** | `https://tb-nspay.settlebank.co.kr/api/pg/{ìƒì ì•„ì´ë””}/sttlmntInfo.do` | GET/POST |
| **ìš´ì˜** | `https://nspay.settlebank.co.kr/api/pg/{ìƒì ì•„ì´ë””}/sttlmntInfo.do` | GET/POST |

### ğŸ“‹ ìš”ì²­ íŒŒë¼ë¯¸í„°

<DocParameterCard
  name="mchtId"
  type="string(10)"
  required={true}
  description="í—¥í† íŒŒì´ë‚¸ì…œì—ì„œ ë¶€ì—¬í•˜ëŠ” ê³ ìœ  ìƒì ì•„ì´ë””ì…ë‹ˆë‹¤."
  example="nxca_jt_il"
/>

<DocParameterCard
  name="method"
  type="string(2)"
  required={true}
  description="ì¡°íšŒí•  ê²°ì œìˆ˜ë‹¨ ì½”ë“œì…ë‹ˆë‹¤."
  example="CA"
/>

<DocParameterCard
  name="crtrDt"
  type="string(8)"
  required={true}
  description="ì •ì‚°ì˜ˆì •ì¼ìì…ë‹ˆë‹¤. YYYYMMDD í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."
  example="20231218"
/>

<DocParameterCard
  name="pktHash"
  type="string(32)"
  required={true}
  description="ìœ„ë³€ì¡° ë°©ì§€ë¥¼ ìœ„í•œ SHA256 í•´ì‹œê°’ì…ë‹ˆë‹¤."
  example="346a2496f3e8b2cbb2ebd157eee0f7404c4e97c34d3cefe8a9b0113cc93f8cc1"
  note="ğŸ”’ ìƒì ì•„ì´ë”” + ì¡°íšŒì¼ì + ì¸ì¦í‚¤ ìˆœì„œë¡œ ì¡°í•©"
/>

### ğŸ’» ì •ì‚°ëŒ€ì‚¬ API êµ¬í˜„

```javascript
// ì •ì‚°ëŒ€ì‚¬ API í˜¸ì¶œ
async function getSettlementReconciliation(params) {
    // í•´ì‹œ ìƒì„±
    const hashData = 
        params.mchtId +         // ìƒì ì•„ì´ë””
        params.crtrDt +         // ì¡°íšŒì¼ì
        params.authKey;         // ì¸ì¦í‚¤
    
    const pktHash = crypto.createHash('sha256').update(hashData, 'utf8').digest('hex');
    
    const requestParams = new URLSearchParams({
        mchtId: params.mchtId,
        method: params.method,
        crtrDt: params.crtrDt,
        pktHash: pktHash
    });
    
    try {
        const response = await fetch(
            `https://tb-nspay.settlebank.co.kr/api/pg/${params.mchtId}/sttlmntInfo.do`,
            {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
                },
                body: requestParams
            }
        );
        
        const responseText = await response.text();
        const lines = responseText.trim().split('\n');
        
        // ì²« ë²ˆì§¸ ì¤„: ê²°ê³¼ ì •ë³´
        const [resultCode, resultMessage, recordCount] = lines[0].split('|');
        
        if (resultCode === '0000') {
            const settlements = [];
            
            // ë‘ ë²ˆì§¸ ì¤„ë¶€í„°: ì •ì‚° ë‚´ì—­
            for (let i = 1; i < lines.length; i++) {
                const fields = lines[i].split('|');
                settlements.push(parseSettlementRecord(fields));
            }
            
            return {
                success: true,
                resultCode,
                resultMessage,
                recordCount: parseInt(recordCount),
                settlements,
                summary: calculateSettlementSummary(settlements)
            };
        } else {
            return {
                success: false,
                resultCode,
                resultMessage,
                recordCount: parseInt(recordCount)
            };
        }
    } catch (error) {
        console.error('ì •ì‚°ëŒ€ì‚¬ API í˜¸ì¶œ ì‹¤íŒ¨:', error);
        throw error;
    }
}

// ì •ì‚° ë ˆì½”ë“œ íŒŒì‹±
function parseSettlementRecord(fields) {
    return {
        mchtId: fields[0],                  // ìƒì ì•„ì´ë””
        trdNo: fields[1],                   // í—¥í† íŒŒì´ë‚¸ì…œ ê±°ë˜ë²ˆí˜¸
        orgTrdNo: fields[2],                // ì›ê±°ë˜ë²ˆí˜¸
        method: fields[3],                  // ê²°ì œìˆ˜ë‹¨
        apprDt: fields[4],                  // ìŠ¹ì¸/ì·¨ì†Œì¼ì
        apprType: fields[5],                // ìŠ¹ì¸/ì·¨ì†Œ ì—¬ë¶€ (0:ìŠ¹ì¸, 1:ì·¨ì†Œ)
        fnCd: fields[6],                    // ê¸ˆìœµì‚¬/í†µì‹ ì‚¬ì½”ë“œ
        apprNo: fields[7],                  // ìŠ¹ì¸ë²ˆí˜¸
        instmtMon: fields[8],               // í• ë¶€ê°œì›”ìˆ˜
        mchtTrdNo: fields[9],               // ì£¼ë¬¸ë²ˆí˜¸
        custNm: fields[10],                 // ì£¼ë¬¸ìëª…
        prdtNm: fields[11],                 // ìƒí’ˆëª…
        payAmt: parseInt(fields[12]),       // ê²°ì œê¸ˆì•¡
        fee: parseInt(fields[13]),          // ìˆ˜ìˆ˜ë£Œ (ê³µê¸‰ê°€ì•¡)
        vat: parseInt(fields[14]),          // ë¶€ê°€ì„¸
        settlementAmt: parseInt(fields[15]), // ì •ì‚°ì˜ˆì •ê¸ˆì•¡
        settlementDt: fields[16]            // ì •ì‚°ì˜ˆì •ì¼ì
    };
}

// ì •ì‚° ìš”ì•½ ê³„ì‚°
function calculateSettlementSummary(settlements) {
    return settlements.reduce((summary, settlement) => {
        if (settlement.apprType === '0') { // ìŠ¹ì¸
            summary.totalPayAmt += settlement.payAmt;
            summary.totalFee += settlement.fee;
            summary.totalVat += settlement.vat;
            summary.totalSettlementAmt += settlement.settlementAmt;
            summary.approvalCount++;
        } else { // ì·¨ì†Œ
            summary.totalPayAmt -= settlement.payAmt;
            summary.totalFee -= settlement.fee;
            summary.totalVat -= settlement.vat;
            summary.totalSettlementAmt -= settlement.settlementAmt;
            summary.cancelCount++;
        }
        return summary;
    }, {
        totalPayAmt: 0,
        totalFee: 0,
        totalVat: 0,
        totalSettlementAmt: 0,
        approvalCount: 0,
        cancelCount: 0
    });
}

// ì‚¬ìš© ì˜ˆì‹œ
const settlementParams = {
    mchtId: "nxca_jt_il",
    method: "CA",
    crtrDt: "20231218", // ì •ì‚°ì˜ˆì •ì¼ì
    authKey: "your-auth-key-from-hecto"
};

getSettlementReconciliation(settlementParams)
    .then(result => {
        if (result.success) {
            console.log(`ì •ì‚° ëŒ€ìƒ ê±°ë˜: ${result.recordCount}ê±´`);
            console.log('ì •ì‚° ìš”ì•½:', result.summary);
            
            result.settlements.forEach(settlement => {
                console.log(
                    `${settlement.apprDt} - ${settlement.prdtNm}: ` +
                    `${settlement.payAmt}ì› (ìˆ˜ìˆ˜ë£Œ: ${settlement.fee}ì›, ì •ì‚°: ${settlement.settlementAmt}ì›)`
                );
            });
        } else {
            console.log('ì •ì‚°ëŒ€ì‚¬ ì‹¤íŒ¨:', result.resultMessage);
        }
    });
```

### ğŸ“Š ì •ì‚°ëŒ€ì‚¬ ì‘ë‹µ ì˜ˆì‹œ

**ì„±ê³µ ì‘ë‹µ:**
```
0000|ì •ìƒ ì²˜ë¦¬ ë˜ì—ˆìŠµë‹ˆë‹¤.|3|
mid_test|SOFP_00000001|SOFP_00000004|VA|20231215|0|089|||TEST0000001||í…ŒìŠ¤íŠ¸ìƒí’ˆ|1000|20|2|978|20231218|
mid_test|SOFP_00000002|SOFP_00000005|VA|20231215|0|089|||TEST0000002||í…ŒìŠ¤íŠ¸ìƒí’ˆ|2000|40|4|1956|20231218|
mid_test|SOFP_00000003|SOFP_00000006|VA|20231215|0|089|||TEST0000003||í…ŒìŠ¤íŠ¸ìƒí’ˆ|3000|60|6|2934|20231218|
```

---

## ğŸ”§ í†µí•© ê±°ë˜ ê´€ë¦¬ ì‹œìŠ¤í…œ

ì„¸ ê°€ì§€ APIë¥¼ í†µí•©í•œ ì™„ì „í•œ ê±°ë˜ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„ ì˜ˆì‹œì…ë‹ˆë‹¤.

```javascript
class TransactionManager {
    constructor(config) {
        this.mchtId = config.mchtId;
        this.hashKey = config.hashKey;
        this.authKey = config.authKey;
        this.isProduction = config.isProduction || false;
    }
    
    // API ì—”ë“œí¬ì¸íŠ¸ ê²°ì •
    getApiEndpoint(apiType) {
        const baseUrl = this.isProduction ? 
            'https://gw.settlebank.co.kr' : 
            'https://tbgw.settlebank.co.kr';
        
        const nsPayUrl = this.isProduction ?
            'https://nspay.settlebank.co.kr' :
            'https://tb-nspay.settlebank.co.kr';
        
        switch (apiType) {
            case 'inquiry':
                return `${baseUrl}/spay/APITrdStatInq.do`;
            case 'reconciliation':
                return `${nsPayUrl}/api/pg/${this.mchtId}/transInfo.do`;
            case 'settlement':
                return `${nsPayUrl}/api/pg/${this.mchtId}/sttlmntInfo.do`;
            default:
                throw new Error('Unknown API type');
        }
    }
    
    // ì‹¤ì‹œê°„ ê±°ë˜ ì¡°íšŒ
    async inquireTransaction(mchtTrdNo, trdDt, trdTm, method, trdAmt) {
        return await inquireTransactionStatus({
            mchtId: this.mchtId,
            mchtTrdNo,
            trdDt,
            trdTm,
            method,
            trdAmt,
            orgTrdDt: trdDt,
            orgMchtTrdNo: mchtTrdNo,
            hashKey: this.hashKey
        });
    }
    
    // ê±°ë˜ëŒ€ì‚¬ ì¡°íšŒ
    async getTransactionReconciliation(method, trdDtSt) {
        return await getTransactionReconciliation({
            mchtId: this.mchtId,
            method,
            trdDtSt,
            authKey: this.authKey
        });
    }
    
    // ì •ì‚°ëŒ€ì‚¬ ì¡°íšŒ
    async getSettlementReconciliation(method, crtrDt) {
        return await getSettlementReconciliation({
            mchtId: this.mchtId,
            method,
            crtrDt,
            authKey: this.authKey
        });
    }
    
    // ì¼ìë³„ ì „ì²´ ê±°ë˜ ìš”ì•½
    async getDailySummary(targetDate) {
        const methods = ['CA', 'VA', 'RA', 'MP'];
        const summary = {
            date: targetDate,
            totalTransactions: 0,
            totalAmount: 0,
            byMethod: {}
        };
        
        for (const method of methods) {
            try {
                const result = await this.getTransactionReconciliation(method, targetDate);
                if (result.success) {
                    const methodSummary = {
                        count: result.recordCount,
                        amount: result.transactions.reduce((sum, tx) => {
                            return sum + (tx.apprType === '0' ? tx.trdAmt : -tx.trdAmt);
                        }, 0)
                    };
                    
                    summary.byMethod[method] = methodSummary;
                    summary.totalTransactions += methodSummary.count;
                    summary.totalAmount += methodSummary.amount;
                }
            } catch (error) {
                console.error(`${method} ê±°ë˜ëŒ€ì‚¬ ì‹¤íŒ¨:`, error);
                summary.byMethod[method] = { count: 0, amount: 0, error: error.message };
            }
        }
        
        return summary;
    }
    
    // ì •ì‚° ì˜ˆì • ìš”ì•½
    async getSettlementSummary(settlementDate) {
        const methods = ['CA', 'VA', 'RA', 'MP'];
        const summary = {
            settlementDate,
            totalSettlementAmount: 0,
            totalFee: 0,
            byMethod: {}
        };
        
        for (const method of methods) {
            try {
                const result = await this.getSettlementReconciliation(method, settlementDate);
                if (result.success) {
                    summary.byMethod[method] = result.summary;
                    summary.totalSettlementAmount += result.summary.totalSettlementAmt;
                    summary.totalFee += result.summary.totalFee;
                }
            } catch (error) {
                console.error(`${method} ì •ì‚°ëŒ€ì‚¬ ì‹¤íŒ¨:`, error);
                summary.byMethod[method] = { error: error.message };
            }
        }
        
        return summary;
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const txManager = new TransactionManager({
    mchtId: "nxca_jt_il",
    hashKey: "your-hash-key",
    authKey: "your-auth-key",
    isProduction: false
});

// ì¼ìë³„ ê±°ë˜ ìš”ì•½ ì¡°íšŒ
txManager.getDailySummary("20231215")
    .then(summary => {
        console.log('ì¼ìë³„ ê±°ë˜ ìš”ì•½:', summary);
        console.log(`ì´ ê±°ë˜: ${summary.totalTransactions}ê±´, ${summary.totalAmount.toLocaleString()}ì›`);
    });

// ì •ì‚° ì˜ˆì • ìš”ì•½ ì¡°íšŒ
txManager.getSettlementSummary("20231218")
    .then(summary => {
        console.log('ì •ì‚° ìš”ì•½:', summary);
        console.log(`ì •ì‚° ì˜ˆì • ê¸ˆì•¡: ${summary.totalSettlementAmount.toLocaleString()}ì›`);
        console.log(`ì´ ìˆ˜ìˆ˜ë£Œ: ${summary.totalFee.toLocaleString()}ì›`);
    });
```

---

## ğŸ“Š ëŒ€ì‚¬ API ì—ëŸ¬ ì½”ë“œ

### ğŸš¨ ê³µí†µ ì—ëŸ¬ ì½”ë“œ

| ì½”ë“œ | ë‚´ìš© |
|------|------|
| `0000` | ì •ìƒ ì²˜ë¦¬ ë˜ì—ˆìŠµë‹ˆë‹¤. |
| `1001` | ì¡°íšŒë‚´ì—­ ì—†ìŒ |
| `ST09` | ìœ íš¨í•˜ì§€ ì•Šì€ ìš”ì²­ì „ë¬¸ |
| `ST10` | ë‚´ë¶€ ì‹œìŠ¤í…œ ì—ëŸ¬ |
| `ST90` | ë“±ë¡ë˜ì§€ ì•Šì€ ìƒì  ì•„ì´ë”” |
| `ST91` | í•„ìˆ˜ íŒŒë¼ë¯¸í„° ì˜¤ë¥˜ |
| `ST92` | í•´ì‰¬ ê°’ ë¶ˆì¼ì¹˜ |

### ğŸ”§ ì—ëŸ¬ í•´ê²° ê°€ì´ë“œ

<div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 my-6">
  <div className="flex">
    <div className="flex-shrink-0">
      <span className="text-yellow-400 text-lg">ğŸ’¡</span>
    </div>
    <div className="ml-3">
      <h4 className="text-yellow-800 font-medium">ì£¼ìš” ë¬¸ì œ í•´ê²°</h4>
      <ul className="mt-2 text-yellow-700 text-sm space-y-1">
        <li>â€¢ <strong>ST92 í•´ì‹œê°’ ë¶ˆì¼ì¹˜</strong>: í•´ì‹œ ìƒì„± ìˆœì„œì™€ ì¸ì¦í‚¤ í™•ì¸</li>
        <li>â€¢ <strong>ST90 ë¯¸ë“±ë¡ ìƒì </strong>: ìƒì ì•„ì´ë”” ì •í™•ì„± í™•ì¸</li>
        <li>â€¢ <strong>1001 ì¡°íšŒë‚´ì—­ ì—†ìŒ</strong>: ì¡°íšŒ ì¼ìì™€ ê²°ì œìˆ˜ë‹¨ í™•ì¸</li>
        <li>â€¢ <strong>ST91 í•„ìˆ˜ íŒŒë¼ë¯¸í„°</strong>: ëª¨ë“  í•„ìˆ˜ íŒŒë¼ë¯¸í„° í¬í•¨ ì—¬ë¶€ í™•ì¸</li>
      </ul>
    </div>
  </div>
</div>

---

## ğŸ’¡ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

### Q. ê±°ë˜ëŒ€ì‚¬ì™€ ì •ì‚°ëŒ€ì‚¬ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”?
A. ê±°ë˜ëŒ€ì‚¬ëŠ” ì‹¤ì œ ë°œìƒí•œ ëª¨ë“  ê±°ë˜(ìŠ¹ì¸/ì·¨ì†Œ)ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ê³ , ì •ì‚°ëŒ€ì‚¬ëŠ” ì‹¤ì œ ì •ì‚°ë  ê¸ˆì•¡ê³¼ ìˆ˜ìˆ˜ë£Œë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

### Q. ì‹¤ì‹œê°„ ê±°ë˜ ì¡°íšŒëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?
A. ê³ ê° ë¬¸ì˜ë‚˜ íŠ¹ì • ê±°ë˜ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì¦‰ì‹œ í™•ì¸í•´ì•¼ í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ëŒ€ëŸ‰ ì¡°íšŒì—ëŠ” ê±°ë˜ëŒ€ì‚¬ APIë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

### Q. í•´ì‹œ ìƒì„± ì‹œ ì£¼ì˜ì‚¬í•­ì€ ë¬´ì—‡ì¸ê°€ìš”?
A. ê° APIë³„ë¡œ í•´ì‹œ ì¡°í•© ìˆœì„œê°€ ë‹¤ë¥´ë¯€ë¡œ ì •í™•í•œ ìˆœì„œë¥¼ í™•ì¸í•˜ê³ , ëª¨ë“  ê°’ì´ ë¬¸ìì—´ë¡œ ë³€í™˜ëœ í›„ ì¡°í•©í•´ì•¼ í•©ë‹ˆë‹¤.

### Q. ëŒ€ì‚¬ API í˜¸ì¶œ ì£¼ê¸°ëŠ” ì–´ë–»ê²Œ ì„¤ì •í•˜ë‚˜ìš”?
A. ê±°ë˜ëŒ€ì‚¬ëŠ” ì¼ 1íšŒ(ìƒˆë²½ ì‹œê°„), ì •ì‚°ëŒ€ì‚¬ëŠ” ì •ì‚°ì¼ ê¸°ì¤€ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.

### Q. ì·¨ì†Œ ê±°ë˜ëŠ” ì–´ë–»ê²Œ êµ¬ë¶„í•˜ë‚˜ìš”?
A. ìŠ¹ì¸êµ¬ë¶„ í•„ë“œ(apprType)ì—ì„œ '0'ì€ ìŠ¹ì¸, '1'ì€ ì·¨ì†Œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì·¨ì†Œ ê±°ë˜ëŠ” ì›ê±°ë˜ë²ˆí˜¸ì™€ ì›ê±°ë˜ì¼ìê°€ í•¨ê»˜ ì œê³µë©ë‹ˆë‹¤.

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

ê±°ë˜ ì¡°íšŒ ë° ê´€ë¦¬ APIë¥¼ ì™„ë£Œí–ˆë‹¤ë©´, ê°œë°œì ì°¸ì¡° ìë£Œë„ í™•ì¸í•´ë³´ì„¸ìš”:

<div className="grid grid-cols-2 md:grid-cols-4 gap-4 my-8">
  <a href="/docs/pg/developer-reference" className="block p-4 bg-white border-2 border-gray-100 hover:border-gray-300 rounded-xl transition-colors group">
    <div className="text-center">
      <div className="w-12 h-12 bg-gray-600 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover:bg-gray-700 transition-colors">
        <span className="text-white text-lg">ğŸ“š</span>
      </div>
      <span className="text-sm font-medium text-gray-900">ê°œë°œì ì°¸ì¡°</span>
    </div>
  </a>
  
  <a href="/docs/pg/getting-started" className="block p-4 bg-white border-2 border-hecto-100 hover:border-hecto-300 rounded-xl transition-colors group">
    <div className="text-center">
      <div className="w-12 h-12 bg-hecto-400 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover:bg-hecto-500 transition-colors">
        <span className="text-white text-lg">ğŸš€</span>
      </div>
      <span className="text-sm font-medium text-gray-900">ì‹œì‘í•˜ê¸°</span>
    </div>
  </a>
  
  <a href="/docs/pg/credit-card" className="block p-4 bg-white border-2 border-blue-100 hover:border-blue-300 rounded-xl transition-colors group">
    <div className="text-center">
      <div className="w-12 h-12 bg-hecto-400 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover:bg-blue-600 transition-colors">
        <span className="text-white text-lg">ğŸ’³</span>
      </div>
      <span className="text-sm font-medium text-gray-900">ì‹ ìš©ì¹´ë“œ</span>
    </div>
  </a>
  
  <a href="/docs/pg/simple-payment" className="block p-4 bg-white border-2 border-green-100 hover:border-green-300 rounded-xl transition-colors group">
    <div className="text-center">
      <div className="w-12 h-12 bg-hecto-400 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover:bg-green-600 transition-colors">
        <span className="text-white text-lg">âš¡</span>
      </div>
      <span className="text-sm font-medium text-gray-900">ê°„í¸ê²°ì œ</span>
    </div>
  </a>
</div>

<DocumentFooter 
  title="ê±°ë˜ ì¡°íšŒ ë° ê´€ë¦¬ì— ëŒ€í•œ ì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë‚˜ìš”?"
  primaryButton={{
    text: "ğŸ“§ ê¸°ìˆ ì§€ì› ë¬¸ì˜",
    href: "mailto:support@hectofinancial.com"
  }}
  secondaryButton={{
    text: "ğŸ“š API ë ˆí¼ëŸ°ìŠ¤",
    href: "/docs/pg/api-reference"
  }}
/>

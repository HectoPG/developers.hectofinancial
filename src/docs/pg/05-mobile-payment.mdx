import { FeatureGrid, TestScenario, ErrorGuide, NextSteps, DocumentFooter } from '../../components'

# 📱 휴대폰 결제

휴대폰 번호 인증을 통해 통신요금과 함께 결제하는 서비스입니다. 간편하고 빠른 결제가 가능하며, 정기결제 서비스도 지원합니다.

## 📖 개요

### 🎯 주요 특징

<FeatureGrid features={[
  {
    icon: "📞",
    title: "간편 인증",
    description: "휴대폰 번호와 생년월일만으로 간단한 본인 인증 및 결제",
    bgColor: "from-purple-50 to-purple-100",
    borderColor: "border-purple-200",
    iconBgColor: "bg-purple-500"
  },
  {
    icon: "📡",
    title: "모든 통신사 지원",
    description: "SKT, KT, LG U+, 알뜰폰 등 모든 국내 통신사 지원",
    bgColor: "from-blue-50 to-blue-100",
    borderColor: "border-blue-200",
    iconBgColor: "bg-blue-500"
  },
  {
    icon: "🔄",
    title: "정기결제",
    description: "월자동 결제 서비스로 구독 서비스에 최적화",
    bgColor: "from-green-50 to-green-100",
    borderColor: "border-green-200",
    iconBgColor: "bg-green-500"
  },
  {
    icon: "⚡",
    title: "하이브리드 API",
    description: "인증과 승인을 분리한 고급 연동 방식 지원",
    bgColor: "from-orange-50 to-orange-100",
    borderColor: "border-orange-200",
    iconBgColor: "bg-orange-500"
  }
]} />

### 📡 지원 통신사

| 통신사 | 코드 | 특징 |
|--------|------|------|
| **SK텔레콤** | `SKT` | 국내 최대 통신사 |
| **KT** | `KTF` | 광범위한 커버리지 |
| **LG유플러스** | `LGT` | 데이터 서비스 우수 |
| **CJ헬로모바일** | `CJH` | 알뜰폰 서비스 |
| **한국케이블텔레콤** | `KCT` | 케이블 연계 서비스 |
| **SK 세븐모바일** | `SKL` | SK 계열 알뜰폰 |

---

## ⚡ 빠른 시작

### 1️⃣ 기본 휴대폰 결제

```html
<!-- 헥토파이낸셜 SDK 로드 -->
<script src="https://tbnpg.settlebank.co.kr/resources/js/v1/SettlePG_v1.2.js"></script>

<script>
// 휴대폰 결제 요청
SETTLE_PG.pay({
    env: "https://tbnpg.settlebank.co.kr",
    mchtId: "nxhp_sb_il",              // 휴대폰 결제 상점 ID
    method: "mobile",                  // 휴대폰 결제
    trdDt: "20231215",                 // 거래일자
    trdTm: "143022",                   // 거래시간
    mchtTrdNo: "MOBILE20231215143022", // 주문번호
    mchtName: "테스트상점",
    mchtEName: "Test Shop",
    pmtPrdtNm: "테스트상품",
    trdAmt: "5000",                    // 5,000원
    mchtCustNm: "홍길동",              // 결제자명
    cphoneNo: "01012345678",           // 휴대폰번호
    telecomCd: "SKT|KTF|LGT",          // 지원 통신사
    notiUrl: "https://yoursite.com/mobile/notify",
    nextUrl: "https://yoursite.com/mobile/success",
    cancUrl: "https://yoursite.com/mobile/cancel",
    pktHash: "생성된해시값",           // SHA256 해시
    ui: {
        type: "popup",
        width: "430",
        height: "660"
    }
}, function(response) {
    if (response.outStatCd === "0021") {
        // 결제 성공
        console.log("휴대폰 결제 성공:", response);
        alert(`결제 완료!\n통신사: ${response.fnNm}\n승인번호: ${response.authDt}`);
    } else if (response.outStatCd === "0061") {
        // 하이브리드 인증 성공
        console.log("인증 성공, 승인 API 호출 필요:", response);
        // 별도 승인 API 호출
        callApprovalAPI(response.trdNo);
    } else {
        // 결제 실패
        console.log("휴대폰 결제 실패:", response.outRsltMsg);
        alert("결제가 실패했습니다: " + response.outRsltMsg);
    }
});
</script>
```

### 2️⃣ 월자동 결제 설정

```javascript
// 정기결제 설정
SETTLE_PG.pay({
    env: "https://tbnpg.settlebank.co.kr",
    mchtId: "nxhp_sb_ma",              // 월자동 결제 전용 상점 ID
    method: "mobile",
    autoPayType: "M",                  // 월자동 결제 설정
    // ... 기타 파라미터
}, function(response) {
    if (response.outStatCd === "0021" && response.billKey) {
        // 정기결제 등록 성공
        console.log("정기결제 등록 성공:", response.billKey);
        // billKey를 저장하여 다음 달 자동결제에 사용
        saveBillKey(response.billKey, response.billKeyExpireDt);
    }
});
```

---

## 🏗️ 구현 가이드

### 1️⃣ UI 휴대폰 결제

#### 📡 API 엔드포인트

| 환경 | URL |
|------|-----|
| **테스트** | `https://tbnpg.settlebank.co.kr/mobile/main.do` |
| **운영** | `https://npg.settlebank.co.kr/mobile/main.do` |

#### 📋 요청 파라미터

<ParameterCard
  name="mchtId"
  type="string(10)"
  required={true}
  description="헥토파이낸셜에서 부여하는 고유 상점아이디입니다. 휴대폰 결제 방식에 따라 다른 상점ID를 사용합니다."
  example="nxhp_sb_il"
  values={[
    "nxhp_sb_il: 일반 휴대폰 결제",
    "nxhp_sb_hd: 하이브리드 방식 (인증/승인 분리)",
    "nxhp_sb_ma: 월자동 결제"
  ]}
/>

<ParameterCard
  name="method"
  type="string(20)"
  required={true}
  description="PG 서비스에 해당하는 결제 구분 코드입니다."
  example="mobile"
  note="휴대폰 결제의 경우 항상 'mobile' 고정값을 사용합니다."
/>

<ParameterCard
  name="trdDt"
  type="string(8)"
  required={true}
  description="거래 요청 일자입니다. yyyyMMdd 형식으로 전달합니다."
  example="20231215"
/>

<ParameterCard
  name="trdTm"
  type="string(6)"
  required={true}
  description="거래 요청 시간입니다. HH24MISS 형식으로 전달합니다."
  example="143022"
/>

<ParameterCard
  name="mchtTrdNo"
  type="string(100)"
  required={true}
  description="상점에서 생성하는 고유 주문번호입니다. 휴대폰 결제 추적과 관리에 사용됩니다."
  example="MOBILE20231215143022"
  note="⚠️ 한글은 사용할 수 없으며, 영문, 숫자, 일부 특수문자만 사용 가능합니다."
/>

<ParameterCard
  name="mchtName"
  type="string(100)"
  required={true}
  description="상점의 한글명입니다. 통신요금 청구서에 표시됩니다."
  example="헥토파이낸셜"
  note="💡 고객이 통신요금 청구서에서 확인할 수 있는 이름입니다."
/>

<ParameterCard
  name="mchtEName"
  type="string(100)"
  required={true}
  description="상점의 영문명입니다."
  example="Hecto Financial"
/>

<ParameterCard
  name="pmtPrdtNm"
  type="string(128)"
  required={true}
  description="결제할 상품의 이름입니다. 결제창과 청구서에 표시됩니다."
  example="프리미엄 멤버십 1개월"
/>

<ParameterCard
  name="trdAmt"
  type="number(12)"
  required={true}
  description="결제할 금액입니다. 통신요금과 함께 청구됩니다."
  example="5000"
  note="⚠️ 이 필드는 AES 암호화가 필요합니다."
/>

<ParameterCard
  name="mchtCustNm"
  type="string(30)"
  required={false}
  description="결제할 고객의 이름입니다. 휴대폰 명의자와 일치하는 것이 좋습니다."
  example="홍길동"
  note="⚠️ 이 필드는 AES 암호화가 필요합니다."
/>

<ParameterCard
  name="cphoneNo"
  type="string(11)"
  required={false}
  description="결제에 사용할 휴대폰 번호입니다. 하이픈 없이 숫자만 입력합니다."
  example="01012345678"
  note="⚠️ 이 필드는 AES 암호화가 필요합니다. 미리 입력하면 결제창에서 자동으로 설정됩니다."
/>

<ParameterCard
  name="telecomCd"
  type="string(23)"
  required={false}
  description="결제창에 표시할 통신사를 제한할 수 있습니다. 파이프(|)로 구분하여 여러 통신사 지정 가능합니다."
  example="SKT|KTF|LGT"
  values={[
    "SKT: SK텔레콤",
    "KTF: KT",
    "LGT: LG유플러스",
    "CJH: CJ헬로모바일",
    "KCT: 한국케이블텔레콤",
    "SKL: SK 세븐모바일"
  ]}
  note="💡 빈 값으로 전달하면 모든 통신사가 표시됩니다."
/>

<ParameterCard
  name="autoPayType"
  type="string(1)"
  required={false}
  description="자동결제 타입을 설정합니다."
  values={[
    "빈 값: 일반 결제 (기본값)",
    "M: 월자동 결제"
  ]}
  note="💡 월자동 결제 설정 시 billKey가 발급되어 정기결제에 사용됩니다."
/>

<ParameterCard
  name="linkMethod"
  type="string(12)"
  required={false}
  description="연동 방식을 설정합니다."
  values={[
    "STD 또는 빈 값: 표준 결제창 (기본값)",
    "HBRD: 하이브리드 방식 (인증/승인 분리)"
  ]}
  note="💡 하이브리드 방식은 인증 후 별도 승인 API를 호출해야 합니다."
/>

<ParameterCard
  name="notiUrl"
  type="string(250)"
  required={true}
  description="결제 완료 후 결과를 전달받을 서버 URL입니다. Server-to-Server 방식으로 결제 결과를 수신합니다."
  example="https://yoursite.com/payment/mobile/notification"
  note="💡 하이브리드 연동의 경우 이 파라미터는 사용되지 않습니다."
/>

<ParameterCard
  name="nextUrl"
  type="string(250)"
  required={true}
  description="결제 완료 후 고객에게 보여줄 화면 URL입니다."
  example="https://yoursite.com/payment/mobile/success"
/>

<ParameterCard
  name="cancUrl"
  type="string(250)"
  required={true}
  description="고객이 휴대폰 결제를 취소했을 때 이동할 페이지 URL입니다."
  example="https://yoursite.com/payment/cancel"
/>

<ParameterCard
  name="mchtParam"
  type="string(4000)"
  required={false}
  description="상점에서 추가로 전달하고 싶은 정보를 담는 예약 필드입니다. 결제 완료 후 그대로 반환됩니다."
  example="userId=12345&subscriptionPlan=premium&period=monthly"
/>

<ParameterCard
  name="email"
  type="string(60)"
  required={false}
  description="고객의 이메일 주소입니다. 결제 영수증 발송에 사용됩니다."
  example="customer@example.com"
  note="⚠️ 이 필드는 AES 암호화가 필요합니다."
/>

<ParameterCard
  name="custIp"
  type="string(15)"
  required={false}
  description="실제 결제를 요청하는 고객의 IP 주소입니다. 보안 검증에 사용됩니다."
  example="192.168.1.100"
  note="⚠️ 서버 IP가 아닌 실제 고객(브라우저)의 IP를 전달해야 합니다."
/>

<ParameterCard
  name="pktHash"
  type="string(200)"
  required={true}
  description="위변조 방지를 위한 SHA256 해시값입니다. 지정된 순서로 파라미터를 조합하여 생성합니다."
  example="f395b6725a9a18f2563ce34f8bc76698051d27c05e5ba815f463f00429061c0c"
  note="🔒 상점아이디 + 결제수단 + 상점주문번호 + 요청일자 + 요청시간 + 거래금액(평문) + 해시키 순서로 조합"
/>

#### 🔐 해시 생성 예시

```javascript
const crypto = require('crypto');

function generateMobilePaymentHash(params, hashKey) {
    // 해시 생성을 위한 데이터 조합
    const hashData = 
        params.mchtId +         // 상점아이디
        params.method +         // 결제수단 (mobile)
        params.mchtTrdNo +      // 상점주문번호
        params.trdDt +          // 요청일자
        params.trdTm +          // 요청시간
        params.trdAmt +         // 거래금액 (평문, 암호화 전)
        hashKey;                // 해시키 (헥토파이낸셜 제공)
    
    // SHA256 해시 생성
    return crypto.createHash('sha256').update(hashData, 'utf8').digest('hex');
}

// 사용 예시
const mobileParams = {
    mchtId: "nxhp_sb_il",
    method: "mobile",
    mchtTrdNo: "MOBILE20231215143022",
    trdDt: "20231215",
    trdTm: "143022",
    trdAmt: "5000"  // 암호화 전 원본 금액
};

const hashKey = "your-hash-key-from-hecto"; // 헥토파이낸셜에서 제공
const pktHash = generateMobilePaymentHash(mobileParams, hashKey);
```

### 2️⃣ 응답 처리

#### 📨 결제 성공 응답

```javascript
{
    "outStatCd": "0021",               // 성공 코드
    "outRsltCd": "0000",               // 결과 코드
    "outRsltMsg": "정상처리",           // 결과 메시지
    "method": "mobile",                // 결제수단
    "mchtTrdNo": "MOBILE20231215143022", // 상점주문번호
    "trdNo": "STFP_PGMPnxhp_sb_il0231215143022M1234567", // 헥토 거래번호
    "trdAmt": "5000",                  // 거래금액
    "authDt": "20231215143045",        // 승인일시
    "fnNm": "SKT",                     // 통신사명
    "fnCd": "001",                     // 통신사코드
    "billKey": "MO1234567890"          // 자동결제키 (월자동 결제시)
}
```

#### 🔐 하이브리드 인증 성공 응답

```javascript
{
    "outStatCd": "0061",               // 인증 성공 코드
    "outRsltCd": "0000",               // 결과 코드
    "outRsltMsg": "인증 성공",          // 결과 메시지
    "method": "mobile",
    "mchtTrdNo": "MOBILE20231215143022",
    "trdNo": "STFP_PGMPnxhp_sb_hd0231215143022M1234567", // 인증 거래번호
    "trdAmt": "5000"
    // 별도 승인 API 호출 필요
}
```

#### ❌ 결제 실패 응답

```javascript
{
    "outStatCd": "0031",               // 실패 코드
    "outRsltCd": "1009",               // 에러 코드
    "outRsltMsg": "결제 요청 정보 누락 (거래금액)", // 에러 메시지
    "method": "mobile",
    "mchtTrdNo": "MOBILE20231215143022"
}
```

### 3️⃣ 결제 완료 노티(NOTI) 처리

휴대폰 결제가 완료되면 `notiUrl`로 결과가 전송됩니다.

```javascript
// Node.js Express 예시
app.post('/payment/mobile/notification', (req, res) => {
    const {
        outStatCd,
        trdNo,
        method,
        bizType,
        mchtTrdNo,
        trdAmt,
        trdDtm,
        billKey,
        billKeyExpireDt,
        telecomCd,
        telecomNm,
        phoneNoEnc,
        pktHash
    } = req.body;
    
    // 1. 해시 검증
    const expectedHash = generateMobileNotiHash(req.body, hashKey);
    if (pktHash !== expectedHash) {
        console.error('해시 검증 실패');
        return res.status(400).send('FAIL');
    }
    
    // 2. 결제 성공 여부 확인
    if (outStatCd === '0021') {
        if (bizType === 'B0') {
            // 일반 결제 성공
            await updateMobilePaymentStatus(mchtTrdNo, {
                status: 'completed',
                hectoTrdNo: trdNo,
                completedAt: trdDtm,
                telecomCode: telecomCd,
                telecomName: telecomNm,
                phoneNumber: phoneNoEnc,
                amount: trdAmt,
                billKey: billKey // 월자동 결제시
            });
        } else if (bizType === 'B1') {
            // 자동연장 결제
            await processMonthlybilling(mchtTrdNo, {
                hectoTrdNo: trdNo,
                amount: trdAmt,
                billedAt: trdDtm
            });
        }
        
        // 고객에게 결제 완료 알림 발송
        await sendMobilePaymentNotification(mchtTrdNo);
        
        // 성공 응답
        res.send('OK');
    } else if (bizType === 'C0') {
        // 취소 처리
        await updateMobilePaymentStatus(mchtTrdNo, {
            status: 'cancelled',
            cancelledAt: trdDtm
        });
        
        res.send('OK');
    } else {
        // 기타 상태 처리
        console.log('휴대폰 결제 상태:', outStatCd, req.body.outRsltMsg);
        res.send('OK');
    }
});

// 휴대폰 결제 노티 해시 생성 함수
function generateMobileNotiHash(notiData, hashKey) {
    const hashData = 
        notiData.outStatCd +    // 거래상태코드
        notiData.trdDtm.substring(0, 8) +  // 거래일자 (YYYYMMDD)
        notiData.trdDtm.substring(8, 14) + // 거래시간 (HHMMSS)
        notiData.mchtId +       // 상점아이디
        notiData.mchtTrdNo +    // 상점주문번호
        notiData.trdAmt +       // 거래금액
        hashKey;                // 해시키
    
    return crypto.createHash('sha256').update(hashData, 'utf8').digest('hex');
}
```

---

## 🔄 고급 기능

### 1️⃣ 하이브리드 API (인증/승인 분리)

인증과 승인을 분리하여 더 유연한 결제 프로세스를 구현할 수 있습니다.

#### 📡 승인 API 엔드포인트

| 환경 | URL |
|------|-----|
| **테스트** | `https://tbgw.settlebank.co.kr/spay/APIMobileApproval.do` |
| **운영** | `https://gw.settlebank.co.kr/spay/APIMobileApproval.do` |

#### 💻 승인 API 호출

```javascript
// 1단계: 인증 완료 후 승인 API 호출
async function callMobileApproval(authTrdNo) {
    const approvalRequest = {
        params: {
            mchtId: "nxhp_sb_hd",
            ver: "0A19",
            mchtTrdNo: "APPROVAL20231215143022",
            trdDt: "20231215",
            trdTm: "143022"
        },
        data: {
            pktHash: "생성된해시값",
            method: "MP",
            authTrdNo: authTrdNo,        // 인증 거래번호
            trdAmt: "5000",
            pmtPrdtNm: "테스트상품"
        }
    };

    try {
        const response = await fetch('https://tbgw.settlebank.co.kr/spay/APIMobileApproval.do', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json; charset=UTF-8'
            },
            body: JSON.stringify(approvalRequest)
        });
        
        const result = await response.json();
        
        if (result.outStatCd === '0021') {
            console.log('승인 성공:', result);
            return result;
        } else {
            console.error('승인 실패:', result.outRsltMsg);
            throw new Error(result.outRsltMsg);
        }
    } catch (error) {
        console.error('승인 API 호출 실패:', error);
        throw error;
    }
}
```

### 2️⃣ 월자동 결제

정기결제 서비스를 위한 월자동 결제 구현 방법입니다.

#### 💻 월자동 결제 API

```javascript
// 월자동 결제 API 호출
async function processMonthlyPayment(billKey, amount, productName) {
    const monthlyRequest = {
        params: {
            mchtId: "nxhp_sb_ma",
            ver: "0A19",
            mchtTrdNo: "MONTHLY20231215143022",
            trdDt: "20231215",
            trdTm: "143022"
        },
        data: {
            pktHash: "생성된해시값",
            method: "MP",
            billKey: billKey,            // 이전에 발급받은 billKey
            trdAmt: amount,
            pmtPrdtNm: productName,
            autoPayType: "M"
        }
    };

    try {
        const response = await fetch('https://tbgw.settlebank.co.kr/spay/APIMobileMonthly.do', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json; charset=UTF-8'
            },
            body: JSON.stringify(monthlyRequest)
        });
        
        const result = await response.json();
        return result;
    } catch (error) {
        console.error('월자동 결제 실패:', error);
        throw error;
    }
}

// 정기결제 스케줄러 예시
async function scheduleMonthlyPayments() {
    // 매월 1일에 실행되는 스케줄러
    const subscriptions = await getActiveSubscriptions();
    
    for (const subscription of subscriptions) {
        try {
            const result = await processMonthlyPayment(
                subscription.billKey,
                subscription.amount,
                subscription.productName
            );
            
            if (result.outStatCd === '0021') {
                await updateSubscriptionStatus(subscription.id, 'paid');
                await sendPaymentConfirmation(subscription.userId);
            } else {
                await updateSubscriptionStatus(subscription.id, 'failed');
                await sendPaymentFailureNotification(subscription.userId);
            }
        } catch (error) {
            console.error(`정기결제 실패 - 구독 ID: ${subscription.id}`, error);
        }
    }
}
```

### 3️⃣ 휴대폰 결제 취소 및 환불

#### 취소 API (당일)

```javascript
const cancelRequest = {
    params: {
        mchtId: "nxhp_sb_il",
        ver: "0A19",
        mchtTrdNo: "CANCEL20231215143022",
        trdDt: "20231215",
        trdTm: "143022"
    },
    data: {
        pktHash: "생성된해시값",
        method: "MP",
        orgTrdNo: "STFP_PGMPnxhp_sb_il0231215143022M1234567", // 원거래번호
        orgTrdDt: "20231215",            // 원거래일자
        cnclAmt: "5000",                 // 취소금액
        cnclRsn: "고객 요청"             // 취소사유
    }
};
```

#### 환불 API (익일 이후)

```javascript
const refundRequest = {
    params: {
        mchtId: "nxhp_sb_il",
        ver: "0A19",
        mchtTrdNo: "REFUND20231216143022",
        trdDt: "20231216",
        trdTm: "143022"
    },
    data: {
        pktHash: "생성된해시값",
        method: "MP",
        orgTrdNo: "STFP_PGMPnxhp_sb_il0231215143022M1234567",
        orgTrdDt: "20231215",
        cnclAmt: "5000",
        cnclRsn: "고객 요청 환불"
    }
};
```

---

## 🧪 테스트 가이드

### 🔧 테스트 환경 설정

**테스트 상점 정보:**
- **일반 결제**: `nxhp_sb_il`
- **하이브리드**: `nxhp_sb_hd`
- **월자동결제**: `nxhp_sb_ma`
- **환경**: `https://tbnpg.settlebank.co.kr`

### 📱 테스트 휴대폰 정보

테스트 환경에서 사용 가능한 휴대폰 번호:

| 통신사 | 휴대폰번호 | 생년월일 | 특징 |
|--------|------------|----------|------|
| **SKT** | `01012345678` | `900101` | 일반 테스트 |
| **KT** | `01087654321` | `850315` | 일반 테스트 |
| **LGU+** | `01055556666` | `920720` | 일반 테스트 |

### 🎯 테스트 시나리오

<div className="grid grid-cols-1 md:grid-cols-2 gap-6 my-8">
  <div className="bg-green-50 border border-green-200 p-6 rounded-xl">
    <h4 className="text-green-900 font-semibold mb-3">✅ 성공 시나리오</h4>
    <ul className="text-green-800 text-sm space-y-2">
      <li>• 일반 휴대폰 결제</li>
      <li>• 하이브리드 인증 → 승인</li>
      <li>• 월자동 결제 등록</li>
      <li>• 정기결제 실행</li>
      <li>• 당일 취소</li>
      <li>• 익일 환불</li>
    </ul>
  </div>
  
  <div className="bg-red-50 border border-red-200 p-6 rounded-xl">
    <h4 className="text-red-900 font-semibold mb-3">❌ 실패 시나리오</h4>
    <ul className="text-red-800 text-sm space-y-2">
      <li>• 잘못된 휴대폰 번호</li>
      <li>• 통신사 불일치</li>
      <li>• 한도 초과</li>
      <li>• 인증 실패</li>
      <li>• 해시값 불일치</li>
    </ul>
  </div>
</div>

---

## ❌ 에러 처리

### 🚨 주요 에러 코드

| 코드 | 메시지 | 원인 | 해결방법 |
|------|--------|------|----------|
| `1009` | 결제 요청 정보 누락 (거래금액) | 필수 파라미터 누락 | 필수 파라미터 확인 |
| `1901` | 해쉬값 불일치 오류 | 해시 생성 오류 | 해시 생성 로직 점검 |
| `1902` | 암호화 항목 미처리 오류 | 암호화 필드 미처리 | AES 암호화 적용 |
| `ST30` | 인증 시간 만료 | 인증 시간 초과 | 인증 시간 내 완료 안내 |
| `ST46` | 취소기간 경과 | 취소 가능 기간 초과 | 환불 API 사용 |
| `ST50` | 중복요청 | 동일한 주문번호 재사용 | 고유한 주문번호 생성 |

### 🔧 에러 해결 가이드

<div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 my-6">
  <div className="flex">
    <div className="flex-shrink-0">
      <span className="text-yellow-400 text-lg">💡</span>
    </div>
    <div className="ml-3">
      <h4 className="text-yellow-800 font-medium">일반적인 문제 해결</h4>
      <ul className="mt-2 text-yellow-700 text-sm space-y-1">
        <li>• <strong>통신사 인증 실패</strong>: 휴대폰 번호와 통신사 일치 확인</li>
        <li>• <strong>월한도 초과</strong>: 통신사별 월 결제 한도 확인</li>
        <li>• <strong>하이브리드 승인 실패</strong>: 인증 거래번호 정확성 확인</li>
        <li>• <strong>정기결제 실패</strong>: billKey 유효기간 확인</li>
      </ul>
    </div>
  </div>
</div>

---

## 💡 자주 묻는 질문

### Q. 휴대폰 결제 한도는 얼마인가요?
A. 통신사별로 다르며, 일반적으로 월 30만원입니다. 고객의 통신요금 납부 이력에 따라 한도가 달라질 수 있습니다.

### Q. 하이브리드 방식의 장점은 무엇인가요?
A. 인증과 승인을 분리하여 더 유연한 결제 프로세스를 구현할 수 있습니다. 예를 들어, 인증 후 재고 확인 후 승인 처리가 가능합니다.

### Q. 월자동 결제는 언제 청구되나요?
A. 매월 1일에 자동으로 청구됩니다. 실패 시 3일간 재시도하며, 계속 실패하면 서비스가 중단됩니다.

### Q. 취소와 환불의 차이는 무엇인가요?
A. 당일 취소는 통신요금에 반영되지 않으며, 익일 이후 환불은 다음 달 통신요금에서 차감됩니다.

### Q. 알뜰폰도 지원되나요?
A. 네, CJ헬로모바일, 한국케이블텔레콤 등 주요 알뜰폰 서비스를 지원합니다.

---

## 🚀 다음 단계

휴대폰 결제 연동을 완료했다면, 다른 결제 수단도 확인해보세요:

<div className="grid grid-cols-2 md:grid-cols-4 gap-4 my-8">
  <a href="/docs/pg/credit-card" className="block p-4 bg-white border-2 border-hecto-100 hover:border-hecto-300 rounded-xl transition-colors group">
    <div className="text-center">
      <div className="w-12 h-12 bg-hecto-400 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover:bg-hecto-500 transition-colors">
        <span className="text-white text-lg">💳</span>
      </div>
      <span className="text-sm font-medium text-gray-900">신용카드</span>
    </div>
  </a>
  
  <a href="/docs/pg/virtual-account" className="block p-4 bg-white border-2 border-green-100 hover:border-green-300 rounded-xl transition-colors group">
    <div className="text-center">
      <div className="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover:bg-green-600 transition-colors">
        <span className="text-white text-lg">💰</span>
      </div>
      <span className="text-sm font-medium text-gray-900">가상계좌</span>
    </div>
  </a>
  
  <a href="/docs/pg/bank-transfer" className="block p-4 bg-white border-2 border-blue-100 hover:border-blue-300 rounded-xl transition-colors group">
    <div className="text-center">
      <div className="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover:bg-blue-600 transition-colors">
        <span className="text-white text-lg">🏦</span>
      </div>
      <span className="text-sm font-medium text-gray-900">계좌이체</span>
    </div>
  </a>
  
  <a href="/docs/pg/simple-payment" className="block p-4 bg-white border-2 border-orange-100 hover:border-orange-300 rounded-xl transition-colors group">
    <div className="text-center">
      <div className="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover:bg-orange-600 transition-colors">
        <span className="text-white text-lg">⚡</span>
      </div>
      <span className="text-sm font-medium text-gray-900">간편결제</span>
    </div>
  </a>
</div>

---

<div className="bg-gray-50 p-6 rounded-xl text-center my-8">
  <p className="text-gray-600 mb-4">
    휴대폰 결제 연동에 대한 추가 문의사항이 있으시나요?
  </p>
  <div className="flex justify-center space-x-4">
    <a href="mailto:support@hectofinancial.com" className="inline-flex items-center px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors">
      📧 기술지원 문의
    </a>
    <a href="/docs/pg/api-reference" className="inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
      📚 API 레퍼런스
    </a>
  </div>
</div>
